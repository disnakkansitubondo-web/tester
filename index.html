<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APLIKASI BARJAS - SISTEM BANTUAN</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        :root {
            --primary-color: #0d47a1;
            --secondary-color: #00695c;
            --accent-color: #ff8f00;
            --light-blue: #e3f2fd;
            --dark-blue: #082e5c;
            --gradient-primary: linear-gradient(135deg, var(--primary-color), var(--dark-blue));
            --gradient-secondary: linear-gradient(135deg, var(--secondary-color), #004d40);
            --gradient-accent: linear-gradient(135deg, var(--accent-color), #e65100);
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 16px rgba(0,0,0,0.12);
            --shadow-lg: 0 8px 28px rgba(0,0,0,0.15);
            --login-gradient: linear-gradient(135deg, #0d47a1, #00695c, #ff8f00);
        }
        
        body {
            background: linear-gradient(135deg, #f5f9ff 0%, #e8f5e9 100%);
            font-family: 'Poppins', 'Segoe UI', sans-serif;
            min-height: 100vh;
            padding: 10px 0;
            overflow-x: hidden;
        }
        
        .app-container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            box-shadow: var(--shadow-lg);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            z-index: 10;
        }
        
        .app-header {
            background: var(--gradient-primary);
            color: white;
            padding: 20px 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .app-header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
            pointer-events: none;
        }
        
        .app-logo {
            font-size: 2.5rem;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        
        .app-title {
            font-size: 1.8rem;
            font-weight: 800;
            margin: 0;
            position: relative;
            z-index: 1;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.3);
        }
        
        .app-subtitle {
            font-size: 1rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            font-weight: 300;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }
        
        .nav-pills .nav-link {
            border-radius: 8px;
            margin-bottom: 8px;
            padding: 12px 15px;
            font-weight: 500;
            color: #444;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .nav-pills .nav-link:hover {
            background-color: #f0f7ff;
            transform: translateX(3px);
        }
        
        .nav-pills .nav-link.active {
            background: var(--gradient-primary);
            font-weight: 600;
            box-shadow: var(--shadow-md);
            transform: translateX(3px);
            color: white;
        }
        
        .section-title {
            border-left: 4px solid var(--primary-color);
            padding-left: 12px;
            margin: 20px 0;
            font-weight: 700;
            color: var(--dark-blue);
            font-size: 1.4rem;
            position: relative;
        }
        
        .section-title::after {
            content: "";
            position: absolute;
            bottom: -5px;
            left: 12px;
            width: 40px;
            height: 2px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }
        
        .btn-primary {
            background: var(--gradient-primary);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-success {
            background: var(--gradient-secondary);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-warning {
            background: var(--gradient-accent);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-warning:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .form-label {
            font-weight: 600;
            color: #444;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .form-label i {
            margin-right: 6px;
            color: var(--primary-color);
        }
        
        .form-control, .form-select {
            border-radius: 8px;
            padding: 12px 15px;
            border: 1px solid #ddd;
            transition: all 0.3s;
            box-shadow: var(--shadow-sm);
            font-size: 0.9rem;
        }
        
        .form-control:focus, .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(13, 71, 161, 0.2);
            transform: translateY(-2px);
        }
        
        .copyright {
            text-align: center;
            padding: 20px;
            background-color: var(--light-blue);
            color: var(--dark-blue);
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .data-table {
            font-size: 0.85rem;
            border-collapse: separate;
            border-spacing: 0;
            box-shadow: var(--shadow-sm);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .data-table th {
            background: var(--gradient-primary);
            color: white;
            font-weight: 600;
            padding: 12px 10px;
            text-align: center;
            position: relative;
            font-size: 0.85rem;
        }
        
        .data-table th::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background: rgba(255,255,255,0.3);
        }
        
        .data-table td {
            padding: 10px 8px;
            vertical-align: middle;
            border-bottom: 1px solid #eee;
            font-size: 0.85rem;
        }
        
        .data-table tr:nth-child(even) {
            background-color: #f9fbff;
        }
        
        .data-table tr:hover {
            background-color: #edf5ff;
        }
        
        .feature-icon {
            font-size: 1.1rem;
            margin-right: 8px;
            width: 24px;
            text-align: center;
        }
        
        .card {
            border-radius: 10px;
            border: none;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .card-header {
            border-radius: 10px 10px 0 0 !important;
            font-weight: 600;
            padding: 15px 20px;
            background: var(--gradient-primary);
            color: white;
            font-size: 0.95rem;
        }
        
        .stats-box {
            text-align: center;
            padding: 20px 15px;
            border-radius: 10px;
            background: white;
            box-shadow: var(--shadow-md);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .stats-box::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }
        
        .stats-box:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }
        
        .stats-number {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary-color);
            margin: 10px 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        
        .stats-label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }
        
        .notification-toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1050;
            min-width: 280px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            max-width: calc(100vw - 40px);
        }
        
        .input-error {
            border-color: #dc3545;
            box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.2);
        }
        
        .error-message {
            color: #dc3545;
            font-size: 0.8rem;
            margin-top: 5px;
            display: none;
            font-weight: 500;
        }
        
        .watermark {
            position: absolute;
            bottom: 10px;
            right: 15px;
            opacity: 0.8;
            font-size: 0.8rem;
            color: white;
            font-weight: 300;
        }
        
        .control-panel {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            box-shadow: var(--shadow-sm);
        }
        
        .control-title {
            font-size: 1rem;
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--light-blue);
        }
        
        .floating-action-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--gradient-primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .floating-action-btn:hover {
            transform: scale(1.1) rotate(90deg);
        }
        
        .filter-section {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
        }
        
        .badge-custom {
            background: var(--gradient-primary);
            color: white;
            padding: 6px 12px;
            border-radius: 16px;
            font-weight: 600;
            font-size: 0.8rem;
        }
        
        .mobile-menu-btn {
            display: none;
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 1050;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            box-shadow: var(--shadow-lg);
        }
        
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1040;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fadeIn {
            animation: fadeIn 0.5s ease forwards;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 8px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 8px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--dark-blue);
        }
        
        /* Responsive styles */
        @media (max-width: 991.98px) {
            .col-md-3.col-lg-2 {
                position: fixed;
                left: -300px;
                top: 0;
                bottom: 0;
                z-index: 1050;
                width: 280px;
                transition: left 0.3s ease;
                overflow-y: auto;
                padding-top: 60px;
            }
            
            .col-md-3.col-lg-2.mobile-show {
                left: 0;
            }
            
            .col-md-9.col-lg-10 {
                width: 100%;
                flex: 0 0 100%;
                max-width: 100%;
            }
            
            .mobile-menu-btn {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .sidebar-overlay.mobile-show {
                display: block;
            }
        }
        
        /* Print Styles - IMPROVED FOR LANDSCAPE */
        @media print {
            @page {
                size: landscape;
                margin: 0.5cm;
            }
            
            body * {
                visibility: hidden;
            }
            
            .app-container, .app-container * {
                visibility: visible;
            }
            
            .app-container {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                box-shadow: none;
            }
            
            .nav-pills, .mobile-menu-btn, .sidebar-overlay, .floating-action-btn,
            .btn-group, .filter-section, .toast {
                display: none !important;
            }
            
            .col-md-3.col-lg-2.p-4.bg-light {
                display: none !important;
            }
            
            .col-md-9.col-lg-10.p-5 {
                width: 100%;
                flex: 0 0 100%;
                max-width: 100%;
                padding: 0 !important;
            }
            
            .copyright {
                display: none;
            }
            
            .data-table {
                font-size: 10px;
                width: 100% !important;
            }
            
            .data-table th, .data-table td {
                padding: 4px 2px;
            }
            
            /* Sembunyikan kolom aksi dan link Google Drive saat mencetak */
            .data-table th:last-child,
            .data-table td:last-child {
                display: none !important;
            }
            
            /* Judul untuk laporan cetak */
            .print-header {
                display: block !important;
                text-align: center;
                margin-bottom: 15px;
            }
            
            .print-title {
                font-size: 18px;
                font-weight: bold;
                margin-bottom: 5px;
            }
            
            .print-subtitle {
                font-size: 14px;
                margin-bottom: 10px;
            }
            
            .print-date {
                font-size: 12px;
                text-align: right;
                margin-bottom: 10px;
            }
            
            /* Styles untuk konten pratinjau saat dicetak */
            .preview-container, .preview-container * {
                visibility: visible;
            }
            
            .preview-container {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                box-shadow: none;
                max-height: none;
                overflow: visible;
                border: none;
                padding: 0;
                background-color: white;
            }
            
            .preview-table {
                width: 100% !important;
                font-size: 10px;
            }
            
            .preview-table th, 
            .preview-table td {
                padding: 4px 2px;
            }
        }

        /* WhatsApp link style */
        .whatsapp-link {
            color: #25D366;
            text-decoration: none;
        }
        
        .whatsapp-link:hover {
            text-decoration: underline;
        }
        
        /* View Link Button */
        .btn-view {
            background: linear-gradient(135deg, #17a2b8, #138496);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        
        .btn-view:hover {
            background: linear-gradient(135deg, #138496, #117a8b);
            color: white;
        }
        
        /* Undo Button */
        .btn-undo {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            color: white;
            border: none;
        }
        
        .btn-undo:hover {
            background: linear-gradient(135deg, #5a6268, #4e555b);
            color: white;
        }
        
        /* WhatsApp number link in table */
        .whatsapp-number {
            color: #25D366;
            cursor: pointer;
            text-decoration: underline;
        }
        
        /* Welcome Modal Styles */
        .welcome-modal .modal-content {
            border-radius: 15px;
            overflow: hidden;
            border: none;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .welcome-header {
            background: var(--gradient-primary);
            color: white;
            text-align: center;
            padding: 25px;
        }
        
        .welcome-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            color: white;
        }
        
        .welcome-body {
            padding: 25px;
            text-align: center;
        }
        
        .welcome-footer {
            background: #f8f9fa;
            padding: 15px;
            text-align: center;
            border-top: 1px solid #eee;
        }
        
        .countdown-timer {
            font-size: 0.9rem;
            color: #6c757d;
            margin-top: 10px;
        }
        
        /* Button untuk cetak per data */
        .btn-print-individual {
            background: linear-gradient(135deg, #6f42c1, #5a2d95);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        
        .btn-print-individual:hover {
            background: linear-gradient(135deg, #5a2d95, #4a2479);
            color: white;
        }
        
        /* Developer Info Styles */
        .developer-info {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            box-shadow: var(--shadow-sm);
        }
        
        .developer-info h6 {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid #ddd;
        }
        
        .developer-contact p {
            margin-bottom: 8px;
            font-size: 0.85rem;
        }
        
        .developer-contact a {
            color: var(--primary-color);
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .developer-contact a:hover {
            color: var(--dark-blue);
            text-decoration: underline;
        }
        
        /* Loading spinner */
        .spinner-border-sm {
            width: 1rem;
            height: 1rem;
        }

        /* Login Modal Styles */
        .login-modal .modal-content {
            border-radius: 15px;
            overflow: hidden;
            border: none;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .login-header {
            background: var(--login-gradient);
            color: white;
            text-align: center;
            padding: 25px 20px;
            position: relative;
        }

        .login-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            color: white;
        }

        .login-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 0;
        }

        .login-subtitle {
            font-size: 1rem;
            opacity: 0.9;
            margin: 5px 0 0;
        }

        .login-body {
            padding: 25px;
            position: relative;
            z-index: 1;
        }

        .login-form-group {
            margin-bottom: 20px;
        }

        .login-form-label {
            font-weight: 600;
            color: var(--dark-blue);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }

        .login-form-label i {
            margin-right: 10px;
            color: var(--dark-blue);
        }

        .login-form-control {
            border-radius: 8px;
            padding: 12px 15px;
            border: 2px solid #ddd;
            transition: all 0.3s;
        }

        .login-form-control:focus {
            border-color: var(--dark-blue);
            box-shadow: 0 0 0 3px rgba(13, 71, 161, 0.2);
        }

        .login-input-group-text {
            background: var(--light-blue);
            border: 2px solid #ddd;
            border-left: none;
        }

        .btn-login {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 12px;
            font-weight: 600;
            border-radius: 8px;
            width: 100%;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .btn-login:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 105, 92, 0.4);
        }

        .btn-login:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .login-security-notice {
            text-align: center;
            margin-top: 20px;
            font-size: 0.85rem;
            color: #666;
        }

        .login-attempts-count {
            text-align: center;
            font-size: 0.9rem;
            color: #ff8f00;
            font-weight: 500;
            margin-top: 5px;
        }

        .login-blocked-message {
            text-align: center;
            background: rgba(220, 53, 69, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            color: #dc3545;
            font-weight: 500;
        }

        .login-countdown {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--dark-blue);
        }

        .login-developer-info {
            background: var(--light-blue);
            border-radius: 10px;
            padding: 20px;
            margin-top: 25px;
            text-align: center;
        }

        .login-developer-logo {
            max-width: 180px;
            margin-bottom: 15px;
            border-radius: 8px;
        }

        .login-developer-contact a {
            color: var(--dark-blue);
            text-decoration: none;
            transition: all 0.3s;
            display: inline-block;
            margin: 5px 0;
        }

        .login-developer-contact a:hover {
            color: var(--primary-color);
            text-decoration: underline;
            transform: translateY(-2px);
        }

        .login-copyright {
            text-align: center;
            margin-top: 20px;
            color: #666;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Animations */
        @keyframes login-shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px); }
        }

        .login-shake {
            animation: login-shake 0.6s cubic-bezier(.36,.07,.19,.97) both;
        }

        /* Login particle background */
        #login-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1040; /* Higher than modal backdrop */
            display: none;
        }

        /* Link Google Drive dalam tabel */
        .drive-link {
            color: #0d47a1;
            text-decoration: none;
            cursor: pointer;
        }

        .drive-link:hover {
            text-decoration: underline;
        }

        /* Modal untuk menambah link */
        .link-modal .modal-dialog {
            max-width: 600px;
        }
        
        /* App content when not authenticated */
        .app-content-unauthenticated {
            display: none;
        }

        /* Search box for desa dropdown */
        .dropdown-search-container {
            position: relative;
        }

        .dropdown-search {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 8px;
            display: none;
        }

        .dropdown-search input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        /* Kode Validasi Styles */
        .kode-validasi-container {
            display: flex;
            align-items: center;
        }
        
        .kode-validasi-input {
            flex: 1;
            margin-right: 10px;
        }
        
        .btn-generate-kode {
            white-space: nowrap;
        }

        /* Auto-fill button styles */
        .btn-auto-fill {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.85rem;
            margin-top: 8px;
        }
        
        .btn-auto-fill:hover {
            background: linear-gradient(135deg, #5a6268, #4e555b);
            color: white;
        }

        .login-hint {
            font-size: 0.85rem;
            color: #0d6efd;
            margin-top: 5px;
            text-align: center;
            background-color: #f8f9fa;
            padding: 8px;
            border-radius: 4px;
            border-left: 3px solid #0d6efd;
        }

        /* New styles for additional fields */
        .btn-not-group {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            color: white;
            border: none;
            padding: 10px 15px;
            borderRadius: 8px;
            font-size: 0.85rem;
            margin-top: 8px;
        }
        
        .btn-not-group:hover {
            background: linear-gradient(135deg, #5a6268, #4e555b);
            color: white;
        }

        .jenis-bantuan-container {
            display: flex;
            gap: 10px;
        }

        .jenis-bantuan-container select,
        .jenis-bantuan-container input {
            flex: 1;
        }

        /* WhatsApp input styling */
        .whatsapp-input-container {
            position: relative;
        }

        .whatsapp-prefix {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #25D366;
            font-weight: bold;
        }

        .whatsapp-input {
            padding-left: 30px;
        }

        /* Preview modal styles */
        .preview-container {
            max-height: 70vh;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            background-color: #f9f9f9;
        }

        .preview-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        .preview-table th, 
        .preview-table td {
            padding: 8px;
            border: 1px solid #ddd;
            text-align: left;
        }

        .preview-table th {
            background-color: #f0f0f0;
            font-weight: bold;
        }

        .preview-table tr:nth-child(even) {
            background-color: #f8f8f8;
        }

        .preview-table tr:hover {
            background-color: #eaeaea;
        }
    </style>
</head>
<body>
    <!-- Login Modal -->
    <div class="modal fade login-modal" id="loginModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="login-header">
                    <div class="login-icon">
                        <i class="fas fa-lock"></i>
                    </div>
                    <h2 class="login-title">AUTHENTICATION REQUIRED</h2>
                    <p class="login-subtitle">Masukkan Kode Keamanan untuk Mengakses Aplikasi</p>
                </div>
                <div class="login-body">
                    <form id="loginForm">
                        <div class="mb-3 login-form-group">
                            <label class="form-label login-form-label">
                                <i class="fas fa-key"></i> Kode Keamanan
                            </label>
                            <div class="input-group">
                                <input type="password" class="form-control login-form-control" id="securityCode" placeholder="Masukkan kode akses aplikasi">
                                <button class="btn btn-outline-secondary toggle-password" type="button">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="form-text text-danger login-attempts-count" id="attemptsCount"></div>
                            <div class="login-hint">
                                <i class="fas fa-lightbulb"></i> Kode default: 1234
                            </div>
                        </div>
                        <button type="submit" class="btn btn-login" id="loginButton">
                            <span class="login-button-text">Masuk ke Aplikasi</span>
                            <span class="spinner-border spinner-border-sm d-none" id="loginSpinner"></span>
                        </button>
                    </form>
                    
                    <div class="login-blocked-message d-none" id="blockedMessage">
                        <i class="fas fa-ban me-2"></i>
                        <span id="blockedText">Terlalu banyak percobaan gagal. Silakan coba lagi dalam </span>
                        <span class="login-countdown" id="countdown">30</span> detik.
                    </div>
                    
                    <div class="login-security-notice">
                        <i class="fas fa-info-circle me-2"></i>
                        Hubungi Administrator untuk mendapatkan kode akses
                    </div>
                    
                    <div class="login-developer-info">
                        <h5 class="mb-3">Developer Information</h5>
                        <div class="login-developer-contact">
                            <p><i class="fab fa-whatsapp me-2"></i> <a href="https://wa.me/6285647709114" target="_blank">+62 856-4770-9114</a></p>
                            <p><i class="fas fa-envelope me-2"></i> <a href="mailto:admin@anekamarket.my.id">admin@anekamarket.my.id</a></p>
                            <p><i class="fas fa-globe me-2"></i> <a href="https://anekamarket.my.id" target="_blank">anekamarket.my.id</a></p>
                        </div>
                    </div>
                    
                    <div class="login-copyright">
                        &copy; 2024 Anekamarket Dev Team. All rights reserved.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Application Container -->
    <div class="app-container app-content-unauthenticated">
        <!-- Header -->
        <div class="app-header">
            <div class="app-logo">
                <i class="fas fa-hands-helping"></i>
            </div>
            <h1 class="app-title">BARJAS - SISTEM BANTUAN</h1>
            <p class="app-subtitle">Sistem Informasi Manajemen Bantuan Sosial Terpadu</p>
            <div class="watermark">v2.1.0</div>
        </div>

        <!-- Mobile Menu Button -->
        <button class="mobile-menu-btn" id="mobileMenuBtn">
            <i class="fas fa-bars"></i>
        </button>

        <!-- Sidebar Overlay -->
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <div class="row g-0">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 p-4 bg-light" id="sidebar">
                <ul class="nav nav-pills flex-column" id="menuList">
                    <li class="nav-item">
                        <a class="nav-link active" href="#" data-bs-target="dashboard">
                            <i class="fas fa-tachometer-alt feature-icon"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-target="inputData">
                            <i class="fas fa-pencil-alt feature-icon"></i> Input Data Bantuan
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-target="dataBantuan">
                            <i class="fas fa-database feature-icon"></i> Data Bantuan
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-target="laporan">
                            <i class="fas fa-chart-bar feature-icon"></i> Laporan
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-target="pratinjau">
                            <i class="fas fa-print feature-icon"></i> Pratinjau Cetak
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-target="pengaturan">
                            <i class="fas fa-cog feature-icon"></i> Pengaturan
                        </a>
                    </li>
                    <li class="nav-item mt-4">
                        <a class="nav-link text-danger" href="#" id="logoutBtn">
                            <i class="fas fa-sign-out-alt feature-icon"></i> Keluar
                        </a>
                    </li>
                </ul>

                <div class="developer-info">
                    <h6>Developer Contact</h6>
                    <div class="developer-contact">
                        <p><i class="fab fa-whatsapp"></i> <a href="https://wa.me/6285647709114" target="_blank">+62 856-4770-9114</a></p>
                        <p><i class="fas fa-envelope"></i> <a href="mailto:admin@anekamarket.my.id">admin@anekamarket.my.id</a></p>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-md-9 col-lg-10 p-5">
                <!-- Dashboard Section -->
                <div class="content-section" id="dashboard">
                    <h3 class="section-title">Dashboard</h3>
                    
                    <div class="row">
                        <div class="col-md-4">
                            <div class="stats-box">
                                <i class="fas fa-users fa-2x text-primary"></i>
                                <div class="stats-number" id="totalPenerima">0</div>
                                <div class="stats-label">Total Penerima Bantuan</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="stats-box">
                                <i class="fas fa-hand-holding-usd fa-2x text-success"></i>
                                <div class="stats-number" id="totalBantuan">0</div>
                                <div class="stats-label">Total Nilai Bantuan</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="stats-box">
                                <i class="fas fa-map-marker-alt fa-2x text-warning"></i>
                                <div class="stats-number" id="totalDesa">0</div>
                                <div class="stats-label">Desa Terjangkau</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mt-4">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-chart-line me-2"></i> Statistik Bantuan per Desa
                                </div>
                                <div class="card-body">
                                    <canvas id="desaChart" height="100"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mt-4">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-chart-pie me-2"></i> Distribusi Jenis Bantuan
                                </div>
                                <div class="card-body">
                                    <canvas id="jenisChart" height="250"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-table me-2"></i> Data Terbaru
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-sm data-table">
                                            <thead>
                                                <tr>
                                                    <th>Nama</th>
                                                    <th>Desa</th>
                                                    <th>Jenis</th>
                                                    <th>Tanggal</th>
                                                </tr>
                                            </thead>
                                            <tbody id="recentData">
                                                <!-- Data akan diisi oleh JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Input Data Section -->
                <div class="content-section d-none" id="inputData">
                    <h3 class="section-title">Input Data Bantuan</h3>
                    
                    <form id="bantuanForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-user"></i> Nama Penerima</label>
                                    <input type="text" class="form-control" id="namaPenerima" required>
                                    <div class="error-message" id="namaError">Nama harus diisi</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-id-card"></i> NIK</label>
                                    <input type="text" class="form-control" id="nik" maxlength="16">
                                    <div class="error-message" id="nikError">NIK harus 16 digit angka</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-map-marker-alt"></i> Desa</label>
                                    <div class="dropdown-search-container">
                                        <select class="form-select" id="desa" required>
                                            <option value="">Pilih Desa</option>
                                            <!-- Desa options will be populated by JavaScript -->
                                        </select>
                                        <div class="dropdown-search" id="desaSearch">
                                            <input type="text" placeholder="Cari desa..." id="searchDesa">
                                        </div>
                                    </div>
                                    <div class="error-message" id="desaError">Desa harus dipilih</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-phone"></i> No. WhatsApp</label>
                                    <div class="whatsapp-input-container">
                                        <span class="whatsapp-prefix">+62</span>
                                        <input type="text" class="form-control whatsapp-input" id="whatsapp" placeholder="812-3456-7890">
                                    </div>
                                    <div class="error-message" id="whatsappError">Format WhatsApp tidak valid</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-hands-helping"></i> Jenis Bantuan</label>
                                    <div class="jenis-bantuan-container">
                                        <select class="form-select" id="jenisBantuan">
                                            <option value="">Pilih Jenis</option>
                                            <option value="Tunai">Tunai</option>
                                            <option value="Beras">Beras</option>
                                            <option value="Sembako">Sembako</option>
                                            <option value="Lainnya">Lainnya</option>
                                        </select>
                                        <input type="text" class="form-control d-none" id="jenisLainnya" placeholder="Jenis Bantuan">
                                    </div>
                                    <div class="error-message" id="jenisError">Jenis bantuan harus dipilih</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-money-bill-wave"></i> Nilai Bantuan (Rp)</label>
                                    <input type="text" class="form-control" id="nilaiBantuan" required>
                                    <div class="error-message" id="nilaiError">Nilai bantuan harus diisi</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-calendar-alt"></i> Tanggal Penyerahan</label>
                                    <input type="text" class="form-control datepicker" id="tanggal" required>
                                    <div class="error-message" id="tanggalError">Tanggal harus diisi</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-link"></i> Link Google Drive</label>
                                    <input type="text" class="form-control" id="driveLink" placeholder="https://drive.google.com/...">
                                    <div class="error-message" id="driveError">Format link tidak valid</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-12">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-sticky-note"></i> Keterangan</label>
                                    <textarea class="form-control" id="keterangan" rows="2"></textarea>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-12">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-key"></i> Kode Validasi</label>
                                    <div class="kode-validasi-container">
                                        <input type="text" class="form-control kode-validasi-input" id="kodeValidasi" placeholder="Masukkan kode validasi" required>
                                        <button type="button" class="btn btn-secondary btn-generate-kode" id="generateKodeBtn">
                                            <i class="fas fa-sync-alt me-1"></i> Generate
                                        </button>
                                    </div>
                                    <div class="error-message" id="kodeError">Kode validasi harus diisi</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mt-3">
                            <div class="col-md-12">
                                <button type="submit" class="btn btn-primary me-2">
                                    <i class="fas fa-save me-1"></i> Simpan Data
                                </button>
                                <button type="reset" class="btn btn-secondary">
                                    <i class="fas fa-undo me-1"></i> Reset Form
                                </button>
                                <button type="button" class="btn btn-outline-info float-end" id="autoFillBtn">
                                    <i class="fas fa-magic me-1"></i> Auto Fill
                                </button>
                            </div>
                        </div>
                    </form>
                </div>

                <!-- Data Bantuan Section -->
                <div class="content-section d-none" id="dataBantuan">
                    <h3 class="section-title">Data Bantuan</h3>
                    
                    <div class="filter-section">
                        <div class="row">
                            <div class="col-md-3">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-filter"></i> Filter Desa</label>
                                    <select class="form-select" id="filterDesa">
                                        <option value="">Semua Desa</option>
                                        <!-- Desa options will be populated by JavaScript -->
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-filter"></i> Filter Jenis</label>
                                    <select class="form-select" id="filterJenis">
                                        <option value="">Semua Jenis</option>
                                        <option value="Tunai">Tunai</option>
                                        <option value="Beras">Beras</option>
                                        <option value="Sembako">Sembako</option>
                                        <option value="Lainnya">Lainnya</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-calendar"></i> Dari Tanggal</label>
                                    <input type="text" class="form-control datepicker" id="filterDariTgl">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-calendar"></i> Sampai Tanggal</label>
                                    <input type="text" class="form-control datepicker" id="filterSampaiTgl">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <button class="btn btn-primary" id="applyFilterBtn">
                                    <i class="fas fa-check me-1"></i> Terapkan Filter
                                </button>
                                <button class="btn btn-secondary ms-2" id="resetFilterBtn">
                                    <i class="fas fa-times me-1"></i> Reset Filter
                                </button>
                            </div>
                            <div class="col-md-6 text-end">
                                <div class="btn-group">
                                    <button class="btn btn-success" id="exportExcelBtn">
                                        <i class="fas fa-file-excel me-1"></i> Excel
                                    </button>
                                    <button class="btn btn-danger" id="exportPdfBtn">
                                        <i class="fas fa-file-pdf me-1"></i> PDF
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="table-responsive">
                        <table class="table table-bordered table-hover data-table" id="tabelBantuan">
                            <thead>
                                <tr>
                                    <th>No</th>
                                    <th>Nama</th>
                                    <th>NIK</th>
                                    <th>Desa</th>
                                    <th>WhatsApp</th>
                                    <th>Jenis</th>
                                    <th>Nilai</th>
                                    <th>Tanggal</th>
                                    <th>Drive</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data akan diisi oleh JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="control-panel">
                        <h6 class="control-title">Kontrol Data</h6>
                        <div class="row">
                            <div class="col-md-6">
                                <button class="btn btn-danger" id="hapusSemuaBtn" data-bs-toggle="modal" data-bs-target="#hapusSemuaModal">
                                    <i class="fas fa-trash me-1"></i> Hapus Semua Data
                                </button>
                            </div>
                            <div class="col-md-6 text-end">
                                <button class="btn btn-warning" id="importDataBtn" data-bs-toggle="modal" data-bs-target="#importModal">
                                    <i class="fas fa-file-import me-1"></i> Import Data
                                </button>
                                <button class="btn btn-info" id="backupDataBtn">
                                    <i class="fas fa-download me-1"></i> Backup Data
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Laporan Section -->
                <div class="content-section d-none" id="laporan">
                    <h3 class="section-title">Laporan</h3>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-file-alt me-2"></i> Generate Laporan
                                </div>
                                <div class="card-body">
                                    <form id="laporanForm">
                                        <div class="mb-3">
                                            <label class="form-label"><i class="fas fa-calendar"></i> Periode Laporan</label>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <input type="text" class="form-control datepicker" id="laporanDariTgl" placeholder="Dari Tanggal" required>
                                                </div>
                                                <div class="col-md-6">
                                                    <input type="text" class="form-control datepicker" id="laporanSampaiTgl" placeholder="Sampai Tanggal" required>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label class="form-label"><i class="fas fa-filter"></i> Filter Desa</label>
                                            <select class="form-select" id="laporanFilterDesa">
                                                <option value="">Semua Desa</option>
                                                <!-- Desa options will be populated by JavaScript -->
                                            </select>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label class="form-label"><i class="fas fa-filter"></i> Filter Jenis Bantuan</label>
                                            <select class="form-select" id="laporanFilterJenis">
                                                <option value="">Semua Jenis</option>
                                                <option value="Tunai">Tunai</option>
                                                <option value="Beras">Beras</option>
                                                <option value="Sembako">Sembako</option>
                                                <option value="Lainnya">Lainnya</option>
                                            </select>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label class="form-label"><i class="fas fa-sort"></i> Urutkan Berdasarkan</label>
                                            <select class="form-select" id="laporanSortBy">
                                                <option value="tanggal">Tanggal</option>
                                                <option value="nama">Nama</option>
                                                <option value="desa">Desa</option>
                                                <option value="jenis">Jenis</option>
                                                <option value="nilai">Nilai</option>
                                            </select>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label class="form-label"><i class="fas fa-sort"></i> Urutan</label>
                                            <select class="form-select" id="laporanSortOrder">
                                                <option value="asc">A - Z / Tertua - Terbaru</option>
                                                <option value="desc">Z - A / Terbaru - Tertua</option>
                                            </select>
                                        </div>
                                        
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-file-pdf me-1"></i> Generate Laporan PDF
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-chart-pie me-2"></i> Statistik Laporan
                                </div>
                                <div class="card-body">
                                    <div id="laporanStats">
                                        <p class="text-center">Pilih periode untuk melihat statistik</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card mt-4">
                                <div class="card-header">
                                    <i class="fas fa-history me-2"></i> Riwayat Laporan
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-sm">
                                            <thead>
                                                <tr>
                                                    <th>Tanggal</th>
                                                    <th>Periode</th>
                                                    <th>Jumlah Data</th>
                                                    <th>Aksi</th>
                                                </tr>
                                            </thead>
                                            <tbody id="riwayatLaporan">
                                                <!-- Data akan diisi oleh JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Pratinjau Cetak Section -->
                <div class="content-section d-none" id="pratinjau">
                    <h3 class="section-title">Pratinjau Cetak</h3>
                    
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i> 
                        Halaman ini menampilkan pratinjau data yang akan dicetak. Gunakan filter untuk memilih data yang ingin ditampilkan.
                    </div>
                    
                    <div class="filter-section">
                        <div class="row">
                            <div class="col-md-3">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-filter"></i> Filter Desa</label>
                                    <select class="form-select" id="printFilterDesa">
                                        <option value="">Semua Desa</option>
                                        <!-- Desa options will be populated by JavaScript -->
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-filter"></i> Filter Jenis</label>
                                    <select class="form-select" id="printFilterJenis">
                                        <option value="">Semua Jenis</option>
                                        <option value="Tunai">Tunai</option>
                                        <option value="Beras">Beras</option>
                                        <option value="Sembako">Sembako</option>
                                        <option value="Lainnya">Lainnya</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-calendar"></i> Dari Tanggal</label>
                                    <input type="text" class="form-control datepicker" id="printDariTgl">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-calendar"></i> Sampai Tanggal</label>
                                    <input type="text" class="form-control datepicker" id="printSampaiTgl">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <button class="btn btn-primary" id="applyPrintFilterBtn">
                                    <i class="fas fa-check me-1"></i> Terapkan Filter
                                </button>
                                <button class="btn btn-secondary ms-2" id="resetPrintFilterBtn">
                                    <i class="fas fa-times me-1"></i> Reset Filter
                                </button>
                            </div>
                            <div class="col-md-6 text-end">
                                <button class="btn btn-success" id="printDataBtn">
                                    <i class="fas fa-print me-1"></i> Cetak Data
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="preview-container mt-4" id="printPreview">
                        <div class="print-header d-none">
                            <h3 class="print-title">LAPORAN DATA BANTUAN SOSIAL</h3>
                            <p class="print-subtitle">Periode: <span id="printPeriode"></span></p>
                            <p class="print-date">Dicetak pada: <span id="printTanggal"></span></p>
                        </div>
                        
                        <table class="table table-bordered preview-table">
                            <thead>
                                <tr>
                                    <th>No</th>
                                    <th>Nama</th>
                                    <th>NIK</th>
                                    <th>Desa</th>
                                    <th>WhatsApp</th>
                                    <th>Jenis</th>
                                    <th>Nilai</th>
                                    <th>Tanggal</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data akan diisi oleh JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Pengaturan Section -->
                <div class="content-section d-none" id="pengaturan">
                    <h3 class="section-title">Pengaturan Aplikasi</h3>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-cog me-2"></i> Pengaturan Umum
                                </div>
                                <div class="card-body">
                                    <form id="pengaturanForm">
                                        <div class="mb-3">
                                            <label class="form-label"><i class="fas fa-key"></i> Kode Keamanan</label>
                                            <input type="password" class="form-control" id="pengaturanKode" placeholder="Masukkan kode keamanan baru">
                                            <div class="form-text">Kode default: 1234</div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label class="form-label"><i class="fas fa-database"></i> Backup Otomatis</label>
                                            <select class="form-select" id="backupAuto">
                                                <option value="1">Aktif</option>
                                                <option value="0">Nonaktif</option>
                                            </select>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label class="form-label"><i class="fas fa-bell"></i> Notifikasi</label>
                                            <select class="form-select" id="notifikasi">
                                                <option value="1">Aktif</option>
                                                <option value="0">Nonaktif</option>
                                            </select>
                                        </div>
                                        
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-save me-1"></i> Simpan Pengaturan
                                        </button>
                                    </form>
                                </div>
                            </div>
                            
                            <div class="card mt-4">
                                <div class="card-header">
                                    <i class="fas fa-download me-2"></i> Backup & Restore
                                </div>
                                <div class="card-body">
                                    <div class="d-grid gap-2">
                                        <button class="btn btn-success" id="backupBtn">
                                            <i class="fas fa-download me-1"></i> Backup Data
                                        </button>
                                        <button class="btn btn-warning" id="restoreBtn" data-bs-toggle="modal" data-bs-target="#restoreModal">
                                            <i class="fas fa-upload me-1"></i> Restore Data
                                        </button>
                                        <button class="btn btn-info" id="resetBtn" data-bs-toggle="modal" data-bs-target="#resetModal">
                                            <i class="fas fa-trash me-1"></i> Reset Data
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-info-circle me-2"></i> Informasi Aplikasi
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <strong>Nama Aplikasi:</strong> BARJAS - Sistem Bantuan Sosial
                                    </div>
                                    <div class="mb-3">
                                        <strong>Versi:</strong> 2.1.0
                                    </div>
                                    <div class="mb-3">
                                        <strong>Dibuat oleh:</strong> Anekamarket Dev Team
                                    </div>
                                    <div class="mb-3">
                                        <strong>Kontak:</strong> 
                                        <ul class="list-unstyled ms-3 mt-2">
                                            <li><i class="fab fa-whatsapp me-2"></i> <a href="https://wa.me/6285647709114" target="_blank">+62 856-4770-9114</a></li>
                                            <li><i class="fas fa-envelope me-2"></i> <a href="mailto:admin@anekamarket.my.id">admin@anekamarket.my.id</a></li>
                                            <li><i class="fas fa-globe me-2"></i> <a href="https://anekamarket.my.id" target="_blank">anekamarket.my.id</a></li>
                                        </ul>
                                    </div>
                                    <div class="mb-3">
                                        <strong>Deskripsi:</strong> Aplikasi manajemen data bantuan sosial untuk mendata penerima bantuan, nilai bantuan, dan lokasi penyaluran.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card mt-4">
                                <div class="card-header">
                                    <i class="fas fa-database me-2"></i> Status Penyimpanan
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <div class="d-flex justify-content-between">
                                            <span>Penyimpanan Lokal</span>
                                            <span id="storageStatus">Tersedia</span>
                                        </div>
                                        <div class="progress mt-2">
                                            <div class="progress-bar" id="storageProgress" role="progressbar" style="width: 25%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">25%</div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <strong>Jumlah Data:</strong> <span id="jumlahData">0</span> records
                                    </div>
                                    <div class="mb-3">
                                        <strong>Ukuran Data:</strong> <span id="ukuranData">0 KB</span>
                                    </div>
                                    <div class="mb-3">
                                        <strong>Update Terakhir:</strong> <span id="lastUpdate">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="copyright">
            &copy; 2024 BARJAS - Sistem Informasi Manajemen Bantuan Sosial Terpadu. All rights reserved.
        </div>
    </div>

    <!-- Floating Action Button -->
    <div class="floating-action-btn" id="fabBtn">
        <i class="fas fa-plus"></i>
    </div>

    <!-- Toast Notification -->
    <div class="toast notification-toast" role="alert" aria-live="assertive" aria-atomic="true" id="notificationToast">
        <div class="toast-header">
            <strong class="me-auto" id="toastTitle">Notification</strong>
            <small id="toastTime">Just now</small>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body" id="toastMessage">
            <!-- Message will be inserted here -->
        </div>
    </div>

    <!-- Modals -->
    <!-- Hapus Data Modal -->
    <div class="modal fade" id="hapusDataModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Hapus Data</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Apakah Anda yakin ingin menghapus data ini?</p>
                    <p class="text-danger"><small>Tindakan ini tidak dapat dibatalkan.</small></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-danger" id="confirmHapusBtn">Hapus</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Hapus Semua Data Modal -->
    <div class="modal fade" id="hapusSemuaModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Hapus Semua Data</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Apakah Anda yakin ingin menghapus semua data?</p>
                    <p class="text-danger"><small>Tindakan ini tidak dapat dibatalkan. Semua data akan dihapus permanen.</small></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-danger" id="confirmHapusSemuaBtn">Hapus Semua</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Import Data Modal -->
    <div class="modal fade" id="importModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Import Data</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Pilih File Excel</label>
                        <input class="form-control" type="file" id="importFile" accept=".xlsx, .xls">
                    </div>
                    <div class="form-text">
                        File harus dalam format Excel (.xlsx atau .xls). Pastikan struktur kolom sesuai dengan format yang ditentukan.
                    </div>
                    <div class="mt-3">
                        <a href="#" id="downloadTemplateBtn">Download template</a>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-primary" id="confirmImportBtn">Import</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Restore Data Modal -->
    <div class="modal fade" id="restoreModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Restore Data</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Pilih File Backup</label>
                        <input class="form-control" type="file" id="restoreFile" accept=".json">
                    </div>
                    <div class="form-text">
                        Pilih file backup data (.json) yang sebelumnya telah diunduh dari aplikasi.
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-primary" id="confirmRestoreBtn">Restore</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Reset Data Modal -->
    <div class="modal fade" id="resetModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Reset Data</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Apakah Anda yakin ingin mereset semua data?</p>
                    <p class="text-danger"><small>Tindakan ini akan menghapus semua data dan mengembalikan pengaturan ke kondisi default. Tindakan ini tidak dapat dibatalkan.</small></p>
                    <div class="mb-3">
                        <label class="form-label">Masukkan Kode Keamanan</label>
                        <input type="password" class="form-control" id="resetKode" placeholder="Masukkan kode keamanan">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-danger" id="confirmResetBtn">Reset</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Data Modal -->
    <div class="modal fade" id="editDataModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Edit Data Bantuan</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editBantuanForm">
                        <input type="hidden" id="editId">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-user"></i> Nama Penerima</label>
                                    <input type="text" class="form-control" id="editNamaPenerima" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-id-card"></i> NIK</label>
                                    <input type="text" class="form-control" id="editNik" maxlength="16">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-map-marker-alt"></i> Desa</label>
                                    <select class="form-select" id="editDesa" required>
                                        <option value="">Pilih Desa</option>
                                        <!-- Desa options will be populated by JavaScript -->
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-phone"></i> No. WhatsApp</label>
                                    <div class="whatsapp-input-container">
                                        <span class="whatsapp-prefix">+62</span>
                                        <input type="text" class="form-control whatsapp-input" id="editWhatsapp" placeholder="812-3456-7890">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-hands-helping"></i> Jenis Bantuan</label>
                                    <div class="jenis-bantuan-container">
                                        <select class="form-select" id="editJenisBantuan">
                                            <option value="">Pilih Jenis</option>
                                            <option value="Tunai">Tunai</option>
                                            <option value="Beras">Beras</option>
                                            <option value="Sembako">Sembako</option>
                                            <option value="Lainnya">Lainnya</option>
                                        </select>
                                        <input type="text" class="form-control d-none" id="editJenisLainnya" placeholder="Jenis Bantuan">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-money-bill-wave"></i> Nilai Bantuan (Rp)</label>
                                    <input type="text" class="form-control" id="editNilaiBantuan" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-calendar-alt"></i> Tanggal Penyerahan</label>
                                    <input type="text" class="form-control datepicker" id="editTanggal" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-link"></i> Link Google Drive</label>
                                    <input type="text" class="form-control" id="editDriveLink" placeholder="https://drive.google.com/...">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-12">
                                <div class="mb-3">
                                    <label class="form-label"><i class="fas fa-sticky-note"></i> Keterangan</label>
                                    <textarea class="form-control" id="editKeterangan" rows="2"></textarea>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-primary" id="confirmEditBtn">Simpan Perubahan</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autonumeric/4.6.0/autoNumeric.min.js"></script>
    <script>
        // Inisialisasi variabel global
        let bantuanData = [];
        let currentEditId = null;
        let loginAttempts = 0;
        let isBlocked = false;
        let securityCode = "1234"; // Kode default

        // Daftar desa
        const desaList = [
            "Aek Banir", "Aek Batu", "Aek Holbung", "Aek Horsik", "Aek Ledong", 
            "Aek Manggis", "Aek Nabara", "Aek Natas", "Aek Nangali", "Aek Pining", 
            "Aek Tangga", "Ampolu", "Batu Lubang", "Batu Rancang", "Bonan Dolok", 
            "Gunung Baringin", "Gunung Malintang", "Gunung Manaon", "Gunung Martua", 
            "Gunung Pane", "Huta Baringin", "Huta Imbaru", "Huta Paung", "Janji Maria", 
            "Janji Matogu", "Lumban Huayan", "Manalu", "Marbun", "Marbun Toruan", 
            "Padang Lay", "Pardomuan", "Pasar Pardinggaran", "Pardinggaran", "Pasar Sipiongot", 
            "Pir Trans Sipiongot", "Rao Rao Dolok", "Sibaragas", "Sigalapang", "Sihaborgoan", 
            "Sihaborgoan Dalan", "Simalagi", "Simangambat", "Simaninggir", "Sipagimbar", 
            "Sipahutar", "Sipiongot", "Sisalean", "Sisoba Nandasan", "Sisobahili", 
            "Sitampurung", "Sitapi", "Tapian Nauli", "Tolang"
        ];

        // Fungsi inisialisasi aplikasi
        function initApp() {
            // Load data dari localStorage
            loadData();
            
            // Setup event listeners
            setupEventListeners();
            
            // Inisialisasi komponen UI
            initUIComponents();
            
            // Update dashboard
            updateDashboard();
            
            // Tampilkan modal login
            $('#loginModal').modal('show');
        }

        // Fungsi untuk memuat data dari localStorage
        function loadData() {
            const savedData = localStorage.getItem('bantuanData');
            if (savedData) {
                bantuanData = JSON.parse(savedData);
            }
            
            const savedCode = localStorage.getItem('securityCode');
            if (savedCode) {
                securityCode = savedCode;
            }
        }

        // Fungsi untuk menyimpan data ke localStorage
        function saveData() {
            localStorage.setItem('bantuanData', JSON.stringify(bantuanData));
            localStorage.setItem('securityCode', securityCode);
        }

        // Fungsi untuk setup event listeners
        function setupEventListeners() {
            // Login form
            $('#loginForm').on('submit', handleLogin);
            $('.toggle-password').on('click', togglePasswordVisibility);
            
            // Menu navigation
            $('#menuList a').on('click', handleMenuNavigation);
            $('#mobileMenuBtn').on('click', toggleMobileMenu);
            $('#sidebarOverlay').on('click', closeMobileMenu);
            $('#logoutBtn').on('click', handleLogout);
            
            // Input data form
            $('#bantuanForm').on('submit', handleSubmitBantuan);
            $('#jenisBantuan').on('change', toggleJenisLainnya);
            $('#generateKodeBtn').on('click', generateKodeValidasi);
            $('#autoFillBtn').on('click', autoFillForm);
            
            // Data bantuan section
            $('#applyFilterBtn').on('click', applyFilter);
            $('#resetFilterBtn').on('click', resetFilter);
            $('#exportExcelBtn').on('click', exportToExcel);
            $('#exportPdfBtn').on('click', exportToPdf);
            $('#hapusSemuaBtn').on('click', confirmHapusSemua);
            $('#confirmHapusSemuaBtn').on('click', hapusSemuaData);
            $('#importDataBtn').on('click', showImportModal);
            $('#confirmImportBtn').on('click', importData);
            $('#backupDataBtn').on('click', backupData);
            
            // Pratinjau cetak section
            $('#applyPrintFilterBtn').on('click', applyPrintFilter);
            $('#resetPrintFilterBtn').on('click', resetPrintFilter);
            $('#printDataBtn').on('click', printData);
            
            // Laporan section
            $('#laporanForm').on('submit', generateLaporan);
            
            // Pengaturan section
            $('#pengaturanForm').on('submit', savePengaturan);
            $('#backupBtn').on('click', backupData);
            $('#restoreBtn').on('click', showRestoreModal);
            $('#confirmRestoreBtn').on('click', restoreData);
            $('#resetBtn').on('click', showResetModal);
            $('#confirmResetBtn').on('click', resetData);
            
            // Edit data modal
            $('#confirmEditBtn').on('click', updateData);
            
            // Floating action button
            $('#fabBtn').on('click', scrollToTop);
        }

        // Fungsi untuk inisialisasi komponen UI
        function initUIComponents() {
            // Inisialisasi datepicker
            $('.datepicker').datepicker({
                format: 'dd-mm-yyyy',
                autoclose: true,
                todayHighlight: true,
                language: 'id'
            });
            
            // Inisialisasi input numeric
            new AutoNumeric('#nilaiBantuan', {
                digitGroupSeparator: '.',
                decimalCharacter: ',',
                decimalPlaces: 0,
                modifyValueOnWheel: false
            });
            
            new AutoNumeric('#editNilaiBantuan', {
                digitGroupSeparator: '.',
                decimalCharacter: ',',
                decimalPlaces: 0,
                modifyValueOnWheel: false
            });
            
            // Isi dropdown desa
            populateDesaDropdowns();
            
            // Isi tabel data bantuan
            populateDataTable();
            
            // Isi pratinjau cetak
            populatePrintPreview();
        }

        // Fungsi untuk mengisi dropdown desa
        function populateDesaDropdowns() {
            const dropdowns = [
                '#desa', '#filterDesa', '#laporanFilterDesa', '#printFilterDesa', '#editDesa'
            ];
            
            dropdowns.forEach(selector => {
                const dropdown = $(selector);
                dropdown.empty();
                dropdown.append('<option value="">Semua Desa</option>');
                
                desaList.sort().forEach(desa => {
                    dropdown.append(`<option value="${desa}">${desa}</option>`);
                });
            });
        }

        // Fungsi untuk mengisi tabel data bantuan
        function populateDataTable() {
            const tableBody = $('#tabelBantuan tbody');
            tableBody.empty();
            
            if (bantuanData.length === 0) {
                tableBody.append(`
                    <tr>
                        <td colspan="10" class="text-center">Tidak ada data</td>
                    </tr>
                `);
                return;
            }
            
            bantuanData.forEach((data, index) => {
                const row = `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${data.nama}</td>
                        <td>${data.nik || '-'}</td>
                        <td>${data.desa}</td>
                        <td>${data.whatsapp ? '+62' + data.whatsapp : '-'}</td>
                        <td>${data.jenis}</td>
                        <td>Rp ${formatNumber(data.nilai)}</td>
                        <td>${data.tanggal}</td>
                        <td>${data.driveLink ? `<a href="${data.driveLink}" target="_blank" class="drive-link">Lihat</a>` : '-'}</td>
                        <td>
                            <button class="btn btn-sm btn-warning me-1 edit-btn" data-id="${data.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-sm btn-danger hapus-btn" data-id="${data.id}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                `;
                tableBody.append(row);
            });
            
            // Tambahkan event listener untuk tombol edit dan hapus
            $('.edit-btn').on('click', function() {
                const id = $(this).data('id');
                editData(id);
            });
            
            $('.hapus-btn').on('click', function() {
                const id = $(this).data('id');
                confirmHapusData(id);
            });
        }

        // Fungsi untuk mengisi pratinjau cetak
        function populatePrintPreview() {
            const tableBody = $('#printPreview tbody');
            tableBody.empty();
            
            if (bantuanData.length === 0) {
                tableBody.append(`
                    <tr>
                        <td colspan="8" class="text-center">Tidak ada data</td>
                    </tr>
                `);
                return;
            }
            
            bantuanData.forEach((data, index) => {
                const row = `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${data.nama}</td>
                        <td>${data.nik || '-'}</td>
                        <td>${data.desa}</td>
                        <td>${data.whatsapp ? '+62' + data.whatsapp : '-'}</td>
                        <td>${data.jenis}</td>
                        <td>Rp ${formatNumber(data.nilai)}</td>
                        <td>${data.tanggal}</td>
                    </tr>
                `;
                tableBody.append(row);
            });
        }

        // Fungsi untuk menangani login
        function handleLogin(e) {
            e.preventDefault();
            
            if (isBlocked) {
                showNotification('Error', 'Anda telah diblokir sementara. Silakan coba lagi nanti.', 'danger');
                return;
            }
            
            const inputCode = $('#securityCode').val();
            
            if (inputCode === securityCode) {
                // Login berhasil
                $('#loginModal').modal('hide');
                $('.app-content-unauthenticated').show();
                loginAttempts = 0;
                updateAttemptsCount();
                showNotification('Berhasil', 'Login berhasil. Selamat datang di aplikasi BARJAS.', 'success');
            } else {
                // Login gagal
                loginAttempts++;
                updateAttemptsCount();
                
                if (loginAttempts >= 3) {
                    isBlocked = true;
                    $('#blockedMessage').removeClass('d-none');
                    $('#loginButton').prop('disabled', true);
                    startCountdown(30);
                }
                
                $('#loginForm').addClass('login-shake');
                setTimeout(() => {
                    $('#loginForm').removeClass('login-shake');
                }, 600);
                
                showNotification('Error', 'Kode keamanan salah. Silakan coba lagi.', 'danger');
            }
        }

        // Fungsi untuk toggle visibility password
        function togglePasswordVisibility() {
            const passwordField = $('#securityCode');
            const icon = $(this).find('i');
            
            if (passwordField.attr('type') === 'password') {
                passwordField.attr('type', 'text');
                icon.removeClass('fa-eye').addClass('fa-eye-slash');
            } else {
                passwordField.attr('type', 'password');
                icon.removeClass('fa-eye-slash').addClass('fa-eye');
            }
        }

        // Fungsi untuk update attempts count
        function updateAttemptsCount() {
            const attemptsText = `Percobaan login: ${loginAttempts}/3`;
            $('#attemptsCount').text(attemptsText);
        }

        // Fungsi untuk countdown ketika diblokir
        function startCountdown(seconds) {
            let countdown = seconds;
            $('#countdown').text(countdown);
            
            const countdownInterval = setInterval(() => {
                countdown--;
                $('#countdown').text(countdown);
                
                if (countdown <= 0) {
                    clearInterval(countdownInterval);
                    isBlocked = false;
                    $('#blockedMessage').addClass('d-none');
                    $('#loginButton').prop('disabled', false);
                    loginAttempts = 0;
                    updateAttemptsCount();
                }
            }, 1000);
        }

        // Fungsi untuk menangani navigasi menu
        function handleMenuNavigation(e) {
            e.preventDefault();
            
            const target = $(this).data('bs-target');
            
            // Update active menu
            $('#menuList a').removeClass('active');
            $(this).addClass('active');
            
            // Tampilkan section yang sesuai
            $('.content-section').addClass('d-none');
            $(`#${target}`).removeClass('d-none');
            
            // Jika mobile, tutup sidebar
            closeMobileMenu();
        }

        // Fungsi untuk toggle mobile menu
        function toggleMobileMenu() {
            $('#sidebar').toggleClass('mobile-show');
            $('#sidebarOverlay').toggleClass('mobile-show');
        }

        // Fungsi untuk menutup mobile menu
        function closeMobileMenu() {
            $('#sidebar').removeClass('mobile-show');
            $('#sidebarOverlay').removeClass('mobile-show');
        }

        // Fungsi untuk menangani logout
        function handleLogout() {
            $('#loginModal').modal('show');
            $('.app-content-unauthenticated').hide();
            showNotification('Info', 'Anda telah logout dari aplikasi.', 'info');
        }

        // Fungsi untuk menangani submit form bantuan
        function handleSubmitBantuan(e) {
            e.preventDefault();
            
            if (!validateForm()) {
                return;
            }
            
            const newData = {
                id: Date.now().toString(),
                nama: $('#namaPenerima').val(),
                nik: $('#nik').val(),
                desa: $('#desa').val(),
                whatsapp: $('#whatsapp').val(),
                jenis: $('#jenisBantuan').val() === 'Lainnya' ? $('#jenisLainnya').val() : $('#jenisBantuan').val(),
                nilai: AutoNumeric.getNumber('#nilaiBantuan'),
                tanggal: $('#tanggal').val(),
                driveLink: $('#driveLink').val(),
                keterangan: $('#keterangan').val(),
                kodeValidasi: $('#kodeValidasi').val()
            };
            
            bantuanData.push(newData);
            saveData();
            
            // Reset form
            $('#bantuanForm')[0].reset();
            AutoNumeric.set('#nilaiBantuan', 0);
            
            // Update UI
            populateDataTable();
            populatePrintPreview();
            updateDashboard();
            
            showNotification('Berhasil', 'Data bantuan berhasil disimpan.', 'success');
        }

        // Fungsi untuk validasi form
        function validateForm() {
            let isValid = true;
            
            // Reset error states
            $('.form-control').removeClass('input-error');
            $('.error-message').hide();
            
            // Validasi nama
            if ($('#namaPenerima').val().trim() === '') {
                $('#namaPenerima').addClass('input-error');
                $('#namaError').show();
                isValid = false;
            }
            
            // Validasi NIK (jika diisi)
            const nik = $('#nik').val();
            if (nik && (nik.length !== 16 || isNaN(nik))) {
                $('#nik').addClass('input-error');
                $('#nikError').show();
                isValid = false;
            }
            
            // Validasi desa
            if ($('#desa').val() === '') {
                $('#desa').addClass('input-error');
                $('#desaError').show();
                isValid = false;
            }
            
            // Validasi WhatsApp (jika diisi)
            const whatsapp = $('#whatsapp').val();
            if (whatsapp && (isNaN(whatsapp) || whatsapp.length < 10)) {
                $('#whatsapp').addClass('input-error');
                $('#whatsappError').show();
                isValid = false;
            }
            
            // Validasi jenis bantuan
            if ($('#jenisBantuan').val() === '') {
                $('#jenisBantuan').addClass('input-error');
                $('#jenisError').show();
                isValid = false;
            }
            
            // Validasi nilai bantuan
            if (AutoNumeric.getNumber('#nilaiBantuan') === 0) {
                $('#nilaiBantuan').addClass('input-error');
                $('#nilaiError').show();
                isValid = false;
            }
            
            // Validasi tanggal
            if ($('#tanggal').val() === '') {
                $('#tanggal').addClass('input-error');
                $('#tanggalError').show();
                isValid = false;
            }
            
            // Validasi kode validasi
            if ($('#kodeValidasi').val() === '') {
                $('#kodeValidasi').addClass('input-error');
                $('#kodeError').show();
                isValid = false;
            }
            
            return isValid;
        }

        // Fungsi untuk toggle input jenis lainnya
        function toggleJenisLainnya() {
            if ($(this).val() === 'Lainnya') {
                $('#jenisLainnya').removeClass('d-none');
                $('#editJenisLainnya').removeClass('d-none');
            } else {
                $('#jenisLainnya').addClass('d-none');
                $('#editJenisLainnya').addClass('d-none');
            }
        }

        // Fungsi untuk generate kode validasi
        function generateKodeValidasi() {
            const kode = Math.floor(1000 + Math.random() * 9000).toString();
            $('#kodeValidasi').val(kode);
        }

        // Fungsi untuk auto fill form (testing)
        function autoFillForm() {
            const randomName = ['Budi Santoso', 'Siti Rahayu', 'Ahmad Fauzi', 'Dewi Lestari', 'Joko Widodo'][Math.floor(Math.random() * 5)];
            const randomDesa = desaList[Math.floor(Math.random() * desaList.length)];
            const randomJenis = ['Tunai', 'Beras', 'Sembako', 'Lainnya'][Math.floor(Math.random() * 4)];
            const randomNilai = Math.floor(500000 + Math.random() * 2000000);
            
            $('#namaPenerima').val(randomName);
            $('#nik').val('1234567890123456');
            $('#desa').val(randomDesa);
            $('#whatsapp').val('81234567890');
            $('#jenisBantuan').val(randomJenis);
            if (randomJenis === 'Lainnya') {
                $('#jenisLainnya').val('Bantuan Pendidikan').removeClass('d-none');
            }
            AutoNumeric.set('#nilaiBantuan', randomNilai);
            $('#tanggal').val('15-06-2024');
            $('#driveLink').val('https://drive.google.com/drive/folders/example');
            $('#keterangan').val('Data contoh untuk testing');
            
            generateKodeValidasi();
        }

        // Fungsi untuk apply filter data
        function applyFilter() {
            // Implementasi filter akan ditambahkan kemudian
            showNotification('Info', 'Fitur filter sedang dalam pengembangan.', 'info');
        }

        // Fungsi untuk reset filter
        function resetFilter() {
            $('#filterDesa').val('');
            $('#filterJenis').val('');
            $('#filterDariTgl').val('');
            $('#filterSampaiTgl').val('');
            
            populateDataTable();
            showNotification('Info', 'Filter telah direset.', 'info');
        }

        // Fungsi untuk export ke Excel
        function exportToExcel() {
            // Implementasi export Excel akan ditambahkan kemudian
            showNotification('Info', 'Fitur export Excel sedang dalam pengembangan.', 'info');
        }

        // Fungsi untuk export ke PDF
        function exportToPdf() {
            // Implementasi export PDF akan ditambahkan kemudian
            showNotification('Info', 'Fitur export PDF sedang dalam pengembangan.', 'info');
        }

        // Fungsi untuk konfirmasi hapus data
        function confirmHapusData(id) {
            currentEditId = id;
            $('#hapusDataModal').modal('show');
        }

        // Fungsi untuk hapus data
        function hapusData() {
            bantuanData = bantuanData.filter(item => item.id !== currentEditId);
            saveData();
            
            populateDataTable();
            populatePrintPreview();
            updateDashboard();
            
            $('#hapusDataModal').modal('hide');
            showNotification('Berhasil', 'Data berhasil dihapus.', 'success');
        }

        // Fungsi untuk konfirmasi hapus semua data
        function confirmHapusSemua() {
            if (bantuanData.length === 0) {
                showNotification('Info', 'Tidak ada data untuk dihapus.', 'info');
                return;
            }
            
            $('#hapusSemuaModal').modal('show');
        }

        // Fungsi untuk hapus semua data
        function hapusSemuaData() {
            bantuanData = [];
            saveData();
            
            populateDataTable();
            populatePrintPreview();
            updateDashboard();
            
            $('#hapusSemuaModal').modal('hide');
            showNotification('Berhasil', 'Semua data berhasil dihapus.', 'success');
        }

        // Fungsi untuk show import modal
        function showImportModal() {
            $('#importModal').modal('show');
        }

        // Fungsi untuk import data
        function importData() {
            // Implementasi import data akan ditambahkan kemudian
            showNotification('Info', 'Fitur import data sedang dalam pengembangan.', 'info');
        }

        // Fungsi untuk backup data
        function backupData() {
            const dataStr = JSON.stringify(bantuanData);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `backup-bantuan-${new Date().toISOString().slice(0,10)}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('Berhasil', 'Backup data berhasil didownload.', 'success');
        }

        // Fungsi untuk apply print filter
        function applyPrintFilter() {
            // Implementasi filter pratinjau akan ditambahkan kemudian
            showNotification('Info', 'Fitur filter pratinjau sedang dalam pengembangan.', 'info');
        }

        // Fungsi untuk reset print filter
        function resetPrintFilter() {
            $('#printFilterDesa').val('');
            $('#printFilterJenis').val('');
            $('#printDariTgl').val('');
            $('#printSampaiTgl').val('');
            
            populatePrintPreview();
            showNotification('Info', 'Filter pratinjau telah direset.', 'info');
        }

        // Fungsi untuk print data
        function printData() {
            window.print();
        }

        // Fungsi untuk generate laporan
        function generateLaporan(e) {
            e.preventDefault();
            
            // Implementasi generate laporan akan ditambahkan kemudian
            showNotification('Info', 'Fitur generate laporan sedang dalam pengembangan.', 'info');
        }

        // Fungsi untuk save pengaturan
        function savePengaturan(e) {
            e.preventDefault();
            
            const newCode = $('#pengaturanKode').val();
            if (newCode) {
                securityCode = newCode;
                saveData();
            }
            
            showNotification('Berhasil', 'Pengaturan berhasil disimpan.', 'success');
        }

        // Fungsi untuk show restore modal
        function showRestoreModal() {
            $('#restoreModal').modal('show');
        }

        // Fungsi untuk restore data
        function restoreData() {
            // Implementasi restore data akan ditambahkan kemudian
            showNotification('Info', 'Fitur restore data sedang dalam pengembangan.', 'info');
        }

        // Fungsi untuk show reset modal
        function showResetModal() {
            $('#resetModal').modal('show');
        }

        // Fungsi untuk reset data
        function resetData() {
            const inputCode = $('#resetKode').val();
            
            if (inputCode !== securityCode) {
                showNotification('Error', 'Kode keamanan salah.', 'danger');
                return;
            }
            
            bantuanData = [];
            securityCode = "1234";
            saveData();
            
            populateDataTable();
            populatePrintPreview();
            updateDashboard();
            
            $('#resetModal').modal('hide');
            showNotification('Berhasil', 'Data berhasil direset ke kondisi awal.', 'success');
        }

        // Fungsi untuk edit data
        function editData(id) {
            const data = bantuanData.find(item => item.id === id);
            if (!data) return;
            
            currentEditId = id;
            
            // Isi form edit
            $('#editId').val(data.id);
            $('#editNamaPenerima').val(data.nama);
            $('#editNik').val(data.nik);
            $('#editDesa').val(data.desa);
            $('#editWhatsapp').val(data.whatsapp);
            
            // Handle jenis bantuan
            if (['Tunai', 'Beras', 'Sembako'].includes(data.jenis)) {
                $('#editJenisBantuan').val(data.jenis);
                $('#editJenisLainnya').addClass('d-none');
            } else {
                $('#editJenisBantuan').val('Lainnya');
                $('#editJenisLainnya').val(data.jenis).removeClass('d-none');
            }
            
            AutoNumeric.set('#editNilaiBantuan', data.nilai);
            $('#editTanggal').val(data.tanggal);
            $('#editDriveLink').val(data.driveLink);
            $('#editKeterangan').val(data.keterangan);
            
            // Tampilkan modal
            $('#editDataModal').modal('show');
        }

        // Fungsi untuk update data
        function updateData() {
            const index = bantuanData.findIndex(item => item.id === currentEditId);
            if (index === -1) return;
            
            // Update data
            bantuanData[index] = {
                ...bantuanData[index],
                nama: $('#editNamaPenerima').val(),
                nik: $('#editNik').val(),
                desa: $('#editDesa').val(),
                whatsapp: $('#editWhatsapp').val(),
                jenis: $('#editJenisBantuan').val() === 'Lainnya' ? $('#editJenisLainnya').val() : $('#editJenisBantuan').val(),
                nilai: AutoNumeric.getNumber('#editNilaiBantuan'),
                tanggal: $('#editTanggal').val(),
                driveLink: $('#editDriveLink').val(),
                keterangan: $('#editKeterangan').val()
            };
            
            saveData();
            
            // Update UI
            populateDataTable();
            populatePrintPreview();
            updateDashboard();
            
            // Tutup modal
            $('#editDataModal').modal('hide');
            
            showNotification('Berhasil', 'Data berhasil diperbarui.', 'success');
        }

        // Fungsi untuk scroll to top
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Fungsi untuk update dashboard
        function updateDashboard() {
            // Update stats
            $('#totalPenerima').text(bantuanData.length);
            
            const totalNilai = bantuanData.reduce((sum, item) => sum + parseInt(item.nilai || 0), 0);
            $('#totalBantuan').text(formatNumber(totalNilai));
            
            const uniqueDesa = [...new Set(bantuanData.map(item => item.desa))].filter(Boolean);
            $('#totalDesa').text(uniqueDesa.length);
            
            // Update recent data
            const recentDataBody = $('#recentData');
            recentDataBody.empty();
            
            const recentData = bantuanData.slice(-5).reverse();
            recentData.forEach(data => {
                const row = `
                    <tr>
                        <td>${data.nama}</td>
                        <td>${data.desa}</td>
                        <td>${data.jenis}</td>
                        <td>${data.tanggal}</td>
                    </tr>
                `;
                recentDataBody.append(row);
            });
            
            // Update charts (akan diimplementasikan kemudian)
        }

        // Fungsi untuk format number
        function formatNumber(num) {
            return new Intl.NumberFormat('id-ID').format(num);
        }

        // Fungsi untuk show notification
        function showNotification(title, message, type) {
            const toast = $('#notificationToast');
            $('#toastTitle').text(title);
            $('#toastMessage').text(message);
            $('#toastTime').text(new Date().toLocaleTimeString());
            
            // Set background color based on type
            toast.removeClass('bg-success bg-danger bg-info bg-warning');
            if (type === 'success') toast.addClass('bg-success');
            else if (type === 'danger') toast.addClass('bg-danger');
            else if (type === 'info') toast.addClass('bg-info');
            else if (type === 'warning') toast.addClass('bg-warning');
            
            // Show toast
            $('.toast').toast('show');
        }

        // Inisialisasi aplikasi ketika dokumen siap
        $(document).ready(function() {
            initApp();
        });
    </script>
</body>
</html>
