<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APLIKASI BARJAS - SISTEM BANTUAN</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        :root {
            --primary-color: #0d47a1;
            --secondary-color: #00695c;
            --accent-color: #ff8f00;
            --light-blue: #e3f2fd;
            --dark-blue: #082e5c;
            --gradient-primary: linear-gradient(135deg, var(--primary-color), var(--dark-blue));
            --gradient-secondary: linear-gradient(135deg, var(--secondary-color), #004d40);
            --gradient-accent: linear-gradient(135deg, var(--accent-color), #e65100);
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 16px rgba(0,0,0,0.12);
            --shadow-lg: 0 8px 28px rgba(0,0,0,0.15);
            --login-gradient: linear-gradient(135deg, #0d47a1, #00695c, #ff8f00);
        }
        
        body {
            background: linear-gradient(135deg, #f5f9ff 0%, #e8f5e9 100%);
            font-family: 'Poppins', 'Segoe UI', sans-serif;
            min-height: 100vh;
            padding: 10px 0;
            overflow-x: hidden;
        }
        
        .app-container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            box-shadow: var(--shadow-lg);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            z-index: 10;
        }
        
        .app-header {
            background: var(--gradient-primary);
            color: white;
            padding: 20px 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .app-header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
            pointer-events: none;
        }
        
        .app-logo {
            font-size: 2.5rem;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        
        .app-title {
            font-size: 1.8rem;
            font-weight: 800;
            margin: 0;
            position: relative;
            z-index: 1;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.3);
        }
        
        .app-subtitle {
            font-size: 1rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            font-weight: 300;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }
        
        .nav-pills .nav-link {
            border-radius: 8px;
            margin-bottom: 8px;
            padding: 12px 15px;
            font-weight: 500;
            color: #444;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .nav-pills .nav-link:hover {
            background-color: #f0f7ff;
            transform: translateX(3px);
        }
        
        .nav-pills .nav-link.active {
            background: var(--gradient-primary);
            font-weight: 600;
            box-shadow: var(--shadow-md);
            transform: translateX(3px);
            color: white;
        }
        
        .section-title {
            border-left: 4px solid var(--primary-color);
            padding-left: 12px;
            margin: 20px 0;
            font-weight: 700;
            color: var(--dark-blue);
            font-size: 1.4rem;
            position: relative;
        }
        
        .section-title::after {
            content: "";
            position: absolute;
            bottom: -5px;
            left: 12px;
            width: 40px;
            height: 2px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }
        
        .btn-primary {
            background: var(--gradient-primary);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-success {
            background: var(--gradient-secondary);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-warning {
            background: var(--gradient-accent);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-warning:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .form-label {
            font-weight: 600;
            color: #444;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .form-label i {
            margin-right: 6px;
            color: var(--primary-color);
        }
        
        .form-control, .form-select {
            border-radius: 8px;
            padding: 12px 15px;
            border: 1px solid #ddd;
            transition: all 0.3s;
            box-shadow: var(--shadow-sm);
            font-size: 0.9rem;
        }
        
        .form-control:focus, .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(13, 71, 161, 0.2);
            transform: translateY(-2px);
        }
        
        .copyright {
            text-align: center;
            padding: 20px;
            background-color: var(--light-blue);
            color: var(--dark-blue);
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .data-table {
            font-size: 0.85rem;
            border-collapse: separate;
            border-spacing: 0;
            box-shadow: var(--shadow-sm);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .data-table th {
            background: var(--gradient-primary);
            color: white;
            font-weight: 600;
            padding: 12px 10px;
            text-align: center;
            position: relative;
            font-size: 0.85rem;
        }
        
        .data-table th::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background: rgba(255,255,255,0.3);
        }
        
        .data-table td {
            padding: 10px 8px;
            vertical-align: middle;
            border-bottom: 1px solid #eee;
            font-size: 0.85rem;
        }
        
        .data-table tr:nth-child(even) {
            background-color: #f9fbff;
        }
        
        .data-table tr:hover {
            background-color: #edf5ff;
        }
        
        .feature-icon {
            font-size: 1.1rem;
            margin-right: 8px;
            width: 24px;
            text-align: center;
        }
        
        .card {
            border-radius: 10px;
            border: none;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .card-header {
            border-radius: 10px 10px 0 0 !important;
            font-weight: 600;
            padding: 15px 20px;
            background: var(--gradient-primary);
            color: white;
            font-size: 0.95rem;
        }
        
        .stats-box {
            text-align: center;
            padding: 20px 15px;
            border-radius: 10px;
            background: white;
            box-shadow: var(--shadow-md);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .stats-box::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }
        
        .stats-box:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }
        
        .stats-number {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary-color);
            margin: 10px 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        
        .stats-label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }
        
        .notification-toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1050;
            min-width: 280px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            max-width: calc(100vw - 40px);
        }
        
        .input-error {
            border-color: #dc3545;
            box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.2);
        }
        
        .error-message {
            color: #dc3545;
            font-size: 0.8rem;
            margin-top: 5px;
            display: none;
            font-weight: 500;
        }
        
        .watermark {
            position: absolute;
            bottom: 10px;
            right: 15px;
            opacity: 0.8;
            font-size: 0.8rem;
            color: white;
            font-weight: 300;
        }
        
        .control-panel {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            box-shadow: var(--shadow-sm);
        }
        
        .control-title {
            font-size: 1rem;
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--light-blue);
        }
        
        .floating-action-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--gradient-primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .floating-action-btn:hover {
            transform: scale(1.1) rotate(90deg);
        }
        
        .filter-section {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
        }
        
        .badge-custom {
            background: var(--gradient-primary);
            color: white;
            padding: 6px 12px;
            border-radius: 16px;
            font-weight: 600;
            font-size: 0.8rem;
        }
        
        .mobile-menu-btn {
            display: none;
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 1050;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            box-shadow: var(--shadow-lg);
        }
        
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1040;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fadeIn {
            animation: fadeIn 0.5s ease forwards;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 8px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 8px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--dark-blue);
        }
        
        /* Responsive styles */
        @media (max-width: 991.98px) {
            .col-md-3.col-lg-2 {
                position: fixed;
                left: -300px;
                top: 0;
                bottom: 0;
                z-index: 1050;
                width: 280px;
                transition: left 0.3s ease;
                overflow-y: auto;
                padding-top: 60px;
            }
            
            .col-md-3.col-lg-2.mobile-show {
                left: 0;
            }
            
            .col-md-9.col-lg-10 {
                width: 100%;
                flex: 0 0 100%;
                max-width: 100%;
            }
            
            .mobile-menu-btn {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .sidebar-overlay.mobile-show {
                display: block;
            }
        }
        
        /* Print Styles - IMPROVED FOR LANDSCAPE */
        @media print {
            @page {
                size: landscape;
                margin: 0.5cm;
            }
            
            body * {
                visibility: hidden;
            }
            
            .app-container, .app-container * {
                visibility: visible;
            }
            
            .app-container {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                box-shadow: none;
            }
            
            .nav-pills, .mobile-menu-btn, .sidebar-overlay, .floating-action-btn,
            .btn-group, .filter-section, .toast {
                display: none !important;
            }
            
            .col-md-3.col-lg-2.p-4.bg-light {
                display: none !important;
            }
            
            .col-md-9.col-lg-10.p-5 {
                width: 100%;
                flex: 0 0 100%;
                max-width: 100%;
                padding: 0 !important;
            }
            
            .copyright {
                display: none;
            }
            
            .data-table {
                font-size: 10px;
                width: 100% !important;
            }
            
            .data-table th, .data-table td {
                padding: 4px 2px;
            }
            
            /* Sembunyikan kolom aksi dan link Google Drive saat mencetak */
            .data-table th:last-child,
            .data-table td:last-child {
                display: none !important;
            }
            
            /* Judul untuk laporan cetak */
            .print-header {
                display: block !important;
                text-align: center;
                margin-bottom: 15px;
            }
            
            .print-title {
                font-size: 18px;
                font-weight: bold;
                margin-bottom: 5px;
            }
            
            .print-subtitle {
                font-size: 14px;
                margin-bottom: 10px;
            }
            
            .print-date {
                font-size: 12px;
                text-align: right;
                margin-bottom: 10px;
            }
        }

        /* WhatsApp link style */
        .whatsapp-link {
            color: #25D366;
            text-decoration: none;
        }
        
        .whatsapp-link:hover {
            text-decoration: underline;
        }
        
        /* View Link Button */
        .btn-view {
            background: linear-gradient(135deg, #17a2b8, #138496);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        
        .btn-view:hover {
            background: linear-gradient(135deg, #138496, #117a8b);
            color: white;
        }
        
        /* Undo Button */
        .btn-undo {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            color: white;
            border: none;
        }
        
        .btn-undo:hover {
            background: linear-gradient(135deg, #5a6268, #4e555b);
            color: white;
        }
        
        /* WhatsApp number link in table */
        .whatsapp-number {
            color: #25D366;
            cursor: pointer;
            text-decoration: underline;
        }
        
        /* Welcome Modal Styles */
        .welcome-modal .modal-content {
            border-radius: 15px;
            overflow: hidden;
            border: none;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .welcome-header {
            background: var(--gradient-primary);
            color: white;
            text-align: center;
            padding: 25px;
        }
        
        .welcome-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            color: white;
        }
        
        .welcome-body {
            padding: 25px;
            text-align: center;
        }
        
        .welcome-footer {
            background: #f8f9fa;
            padding: 15px;
            text-align: center;
            border-top: 1px solid #eee;
        }
        
        .countdown-timer {
            font-size: 0.9rem;
            color: #6c757d;
            margin-top: 10px;
        }
        
        /* Button untuk cetak per data */
        .btn-print-individual {
            background: linear-gradient(135deg, #6f42c1, #5a2d95);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        
        .btn-print-individual:hover {
            background: linear-gradient(135deg, #5a2d95, #4a2479);
            color: white;
        }
        
        /* Developer Info Styles */
        .developer-info {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            box-shadow: var(--shadow-sm);
        }
        
        .developer-info h6 {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid #ddd;
        }
        
        .developer-contact p {
            margin-bottom: 8px;
            font-size: 0.85rem;
        }
        
        .developer-contact a {
            color: var(--primary-color);
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .developer-contact a:hover {
            color: var(--dark-blue);
            text-decoration: underline;
        }
        
        /* Welcome Splash Screen */
        .welcome-splash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-primary);
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }
        
        .welcome-splash-content {
            text-align: center;
            max-width: 600px;
            padding: 30px;
        }
        
        .welcome-splash-logo {
            font-size: 4rem;
            margin-bottom: 20px;
        }
        
        .welcome-splash-title {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 15px;
        }
        
        .welcome-splash-message {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 25px;
        }
        
        .welcome-splash-countdown {
            font-size: 1rem;
            margin-top: 20px;
        }
        
        .welcome-splash-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .welcome-splash-close:hover {
            background: rgba(255,255,255,0.3);
            transform: rotate(90deg);
        }
        
        /* Loading spinner */
        .spinner-border-sm {
            width: 1rem;
            height: 1rem;
        }

        /* Login Modal Styles */
        .login-modal .modal-content {
            border-radius: 15px;
            overflow: hidden;
            border: none;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .login-header {
            background: var(--login-gradient);
            color: white;
            text-align: center;
            padding: 25px 20px;
            position: relative;
        }

        .login-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            color: white;
        }

        .login-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 0;
        }

        .login-subtitle {
            font-size: 1rem;
            opacity: 0.9;
            margin: 5px 0 0;
        }

        .login-body {
            padding: 25px;
            position: relative;
            z-index: 1;
        }

        .login-form-group {
            margin-bottom: 20px;
        }

        .login-form-label {
            font-weight: 600;
            color: var(--dark-blue);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }

        .login-form-label i {
            margin-right: 10px;
            color: var(--dark-blue);
        }

        .login-form-control {
            border-radius: 8px;
            padding: 12px 15px;
            border: 2px solid #ddd;
            transition: all 0.3s;
        }

        .login-form-control:focus {
            border-color: var(--dark-blue);
            box-shadow: 0 0 0 3px rgba(13, 71, 161, 0.2);
        }

        .login-input-group-text {
            background: var(--light-blue);
            border: 2px solid #ddd;
            border-left: none;
        }

        .btn-login {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 12px;
            font-weight: 600;
            border-radius: 8px;
            width: 100%;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .btn-login:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 105, 92, 0.4);
        }

        .btn-login:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .login-security-notice {
            text-align: center;
            margin-top: 20px;
            font-size: 0.85rem;
            color: #666;
        }

        .login-attempts-count {
            text-align: center;
            font-size: 0.9rem;
            color: #ff8f00;
            font-weight: 500;
            margin-top: 5px;
        }

        .login-blocked-message {
            text-align: center;
            background: rgba(220, 53, 69, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            color: #dc3545;
            font-weight: 500;
        }

        .login-countdown {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--dark-blue);
        }

        .login-developer-info {
            background: var(--light-blue);
            border-radius: 10px;
            padding: 20px;
            margin-top: 25px;
            text-align: center;
        }

        .login-developer-logo {
            max-width: 180px;
            margin-bottom: 15px;
            border-radius: 8px;
        }

        .login-developer-contact a {
            color: var(--dark-blue);
            text-decoration: none;
            transition: all 0.3s;
            display: inline-block;
            margin: 5px 0;
        }

        .login-developer-contact a:hover {
            color: var(--primary-color);
            text-decoration: underline;
            transform: translateY(-2px);
        }

        .login-copyright {
            text-align: center;
            margin-top: 20px;
            color: #666;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Animations */
        @keyframes login-shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px); }
        }

        .login-shake {
            animation: login-shake 0.6s cubic-bezier(.36,.07,.19,.97) both;
        }

        /* Login particle background */
        #login-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1040; /* Higher than modal backdrop */
            display: none;
        }

        /* Link Google Drive dalam tabel */
        .drive-link {
            color: #0d47a1;
            text-decoration: none;
            cursor: pointer;
        }

        .drive-link:hover {
            text-decoration: underline;
        }

        /* Modal untuk menambah link */
        .link-modal .modal-dialog {
            max-width: 600px;
        }
        
        /* App content when not authenticated */
        .app-content-unauthenticated {
            display: none;
        }

        /* Search box for desa dropdown */
        .dropdown-search-container {
            position: relative;
        }

        .dropdown-search {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 8px;
            display: none;
        }

        .dropdown-search input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        /* Kode Validasi Styles */
        .kode-validasi-container {
            display: flex;
            align-items: center;
        }
        
        .kode-validasi-input {
            flex: 1;
            margin-right: 10px;
        }
        
        .btn-generate-kode {
            white-space: nowrap;
        }
    </style>
</head>
<body>
    <!-- Login Modal -->
    <div class="modal fade login-modal" id="loginModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="login-header">
                    <div class="login-icon">
                        <i class="fas fa-lock"></i>
                    </div>
                    <h2 class="login-title">AUTHENTICATION REQUIRED</h2>
                    <p class="login-subtitle">Masukkan Kode Keamanan untuk Mengakses Aplikasi</p>
                </div>
                <div class="login-body">
                    <form id="loginForm">
                        <div class="mb-3 login-form-group">
                            <label class="form-label login-form-label">
                                <i class="fas fa-key"></i> Kode Keamanan
                            </label>
                            <div class="input-group">
                                <input type="password" class="form-control login-form-control" id="securityCode" placeholder="Masukkan kode akses aplikasi">
                                <button class="btn btn-outline-secondary toggle-password" type="button">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="form-text text-danger login-attempts-count" id="attemptsCount"></div>
                        </div>
                        <button type="submit" class="btn btn-login" id="loginButton">
                            <span class="login-button-text">Masuk ke Aplikasi</span>
                            <span class="spinner-border spinner-border-sm d-none" id="loginSpinner"></span>
                        </button>
                    </form>
                    
                    <div class="login-blocked-message d-none" id="blockedMessage">
                        <i class="fas fa-ban me-2"></i>
                        <span id="blockedText">Terlalu banyak percobaan gagal. Silakan coba lagi dalam </span>
                        <span class="login-countdown" id="countdown">30</span> detik.
                    </div>
                    
                    <div class="login-security-notice">
                        <i class="fas fa-info-circle me-2"></i>
                        Hubungi Administrator untuk mendapatkan kode akses
                    </div>
                    
                    <div class="login-developer-info">
                        <h5 class="mb-3">Developer Information</h5>
                        <div class="login-developer-contact">
                            <p><i class="fab fa-whatsapp me-2"></i> <a href="https://wa.me/6285647709114" target="_blank">+62 856-4770-9114</a></p>
                            <p><i class="fas fa-envelope me-2"></i> <a href="mailto:admin@anekamarket.my.id">admin@anekamarket.my.id</a></p>
                        </div>
                    </div>
                    
                    <div class="login-copyright">
                        &copy; 2025 Lentera karya Situbondo
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Login particle background -->
    <div id="login-particles"></div>
    
    <!-- Welcome Splash Screen -->
    <div class="welcome-splash" id="welcomeSplash">
        <button class="welcome-splash-close" id="closeSplash">
            <i class="fas fa-times"></i>
        </button>
        <div class="welcome-splash-content">
            <div class="welcome-splash-logo">
                <i class="fas fa-hands-helping"></i>
            </div>
            <h1 class="welcome-splash-title">SISTEM BANTUAN BARJAS</h1>
            <p class="welcome-splash-message">
                Aplikasi Sistem Bantuan BARJAS merupakan platform terpadu yang dirancang untuk mentransformasi pendataan, penyaluran, 
                dan monitoring program bantuan pemerintah. Aplikasi ini kami ciptakan untuk mendorong efisiensi, akurasi, 
                dan transparansi dalam pengelolaan bantuan, guna mempercepat penyerapan dan meningkatkan akuntabilitas.
            </p>
            <div class="welcome-splash-countdown" id="splashCountdown">
                Membuka aplikasi dalam <span id="countdownTimer">5</span> detik...
            </div>
        </div>
    </div>
    
    <!-- Main Application Content (initially hidden) -->
    <div class="app-content-unauthenticated" id="appContent">
        <!-- Mobile Menu Button -->
        <button class="mobile-menu-btn" id="mobileMenuBtn">
            <i class="fas fa-bars"></i>
        </button>
        
        <!-- Sidebar Overlay -->
        <div class="sidebar-overlay" id="sidebarOverlay"></div>
        
        <div class="app-container animate-fadeIn">
            <div class="app-header">
                <div class="app-logo">
                    <i class="fas fa-hands-helping"></i>
                </div>
                <h1 class="app-title">BARJAS</h1>
                <p class="app-subtitle">Sistem Bantuan Terpadu</p>
                <p class="app-subtitle">KABUPATEN SITUBONDO</p>
                <div class="watermark">v2.0.1</div>
            </div>
            
            <div class="row g-0">
                <!-- Sidebar Navigation -->
                <div class="col-md-3 col-lg-2 p-4 bg-light" id="sidebarMenu">
                    <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                        <button class="nav-link active" id="v-pills-dashboard-tab" data-bs-toggle="pill" data-bs-target="#v-pills-dashboard" type="button" role="tab" aria-controls="v-pills-dashboard" aria-selected="true">
                            <i class="fas fa-tachometer-alt feature-icon"></i> Dashboard
                        </button>
                        <button class="nav-link" id="v-pills-input-tab" data-bs-toggle="pill" data-bs-target="#v-pills-input" type="button" role="tab" aria-controls="v-pills-input" aria-selected="false">
                            <i class="fas fa-pen-to-square feature-icon"></i> Input Data
                        </button>
                        <button class="nav-link" id="v-pills-data-tab" data-bs-toggle="pill" data-bs-target="#v-pills-data" type="button" role="tab" aria-controls="v-pills-data" aria-selected="false">
                            <i class="fas fa-database feature-icon"></i> Kelola Data
                        </button>
                        <button class="nav-link" id="v-pills-stats-tab" data-bs-toggle="pill" data-bs-target="#v-pills-stats" type="button" role="tab" aria-controls="v-pills-stats" aria-selected="false">
                            <i class="fas fa-chart-pie feature-icon"></i> Statistik
                        </button>
                        <button class="nav-link" id="v-pills-export-tab" data-bs-toggle="pill" data-bs-target="#v-pills-export" type="button" role="tab" aria-controls="v-pills-export" aria-selected="false">
                            <i class="fas fa-file-export feature-icon"></i> Ekspor Data
                        </button>
                        <button class="nav-link" id="v-pills-settings-tab" data-bs-toggle="pill" data-bs-target="#v-pills-settings" type="button" role="tab" aria-controls="v-pills-settings" aria-selected="false">
                            <i class="fas fa-gears feature-icon"></i> Pengaturan
                        </button>
                        <button class="nav-link" id="v-pills-help-tab" data-bs-toggle="pill" data-bs-target="#v-pills-help" type="button" role="tab" aria-controls="v-pills-help" aria-selected="false">
                            <i class="fas fa-circle-question feature-icon"></i> Bantuan
                        </button>
                        <button class="nav-link text-danger" id="logoutButton">
                            <i class="fas fa-power-off feature-icon"></i> Keluar
                        </button>
                    </div>
                    
                    <div class="developer-info mt-4">
                        <h6>Developer Contact</h6>
                        <div class="developer-contact">
                            <p><i class="fab fa-whatsapp me-2"></i> <a href="https://wa.me/6285647709114" target="_blank">+62 856-4770-9114</a></p>
                            <p><i class="fas fa-envelope me-2"></i> <a href="mailto:admin@anekamarket.my.id">admin@anekamarket.my.id</a></p>
                        </div>
                    </div>
                </div>
                
                <!-- Main Content Area -->
                <div class="col-md-9 col-lg-10 p-5">
                    <div class="tab-content" id="v-pills-tabContent">
                        <!-- Dashboard Tab -->
                        <div class="tab-pane fade show active" id="v-pills-dashboard" role="tabpanel" aria-labelledby="v-pills-dashboard-tab">
                            <h3 class="section-title">Dashboard Utama</h3>
                            
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="stats-box">
                                        <i class="fas fa-users fa-2x text-primary"></i>
                                        <div class="stats-number" id="totalPenerima">0</div>
                                        <div class="stats-label">Total Penerima</div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="stats-box">
                                        <i class="fas fa-check-circle fa-2x text-success"></i>
                                        <div class="stats-number" id="totalTerverifikasi">0</div>
                                        <div class="stats-label">Terverifikasi</div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="stats-box">
                                        <i class="fas fa-clock fa-2x text-warning"></i>
                                        <div class="stats-number" id="totalPending">0</div>
                                        <div class="stats-label">Pending</div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="stats-box">
                                        <i class="fas fa-map-marker-alt fa-2x text-info"></i>
                                        <div class="stats-number" id="totalDesa">0</div>
                                        <div class="stats-label">Desa Terjangkau</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row mt-4">
                                <div class="col-md-8">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-chart-line me-2"></i> Statistik Penerima Bantuan
                                        </div>
                                        <div class="card-body">
                                            <canvas id="statsChart" height="250"></canvas>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-chart-pie me-2"></i> Status Verifikasi
                                        </div>
                                        <div class="card-body">
                                            <canvas id="statusChart" height="250"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row mt-4">
                                <div class="col-12">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-history me-2"></i> Data Terbaru
                                        </div>
                                        <div class="card-body">
                                            <div class="table-responsive">
                                                <table class="table table-hover data-table" id="recentTable">
                                                    <thead>
                                                        <tr>
                                                            <th>No</th>
                                                            <th>Nama</th>
                                                            <th>Desa</th>
                                                            <th>Jenis Bantuan</th>
                                                            <th>Tanggal</th>
                                                            <th>Status</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <!-- Data akan diisi oleh JavaScript -->
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Input Data Tab -->
                        <div class="tab-pane fade" id="v-pills-input" role="tabpanel" aria-labelledby="v-pills-input-tab">
                            <h3 class="section-title">Input Data Penerima Bantuan</h3>
                            
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle me-2"></i> Pastikan data yang dimasukkan sudah benar dan lengkap.
                            </div>
                            
                            <form id="inputForm">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="nama" class="form-label"><i class="fas fa-user"></i> Nama Lengkap</label>
                                            <input type="text" class="form-control" id="nama" placeholder="Masukkan nama lengkap">
                                            <div class="error-message" id="namaError"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="nik" class="form-label"><i class="fas fa-id-card"></i> NIK</label>
                                            <input type="text" class="form-control" id="nik" placeholder="Masukkan NIK">
                                            <div class="error-message" id="nikError"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="alamat" class="form-label"><i class="fas fa-house"></i> Alamat</label>
                                            <textarea class="form-control" id="alamat" rows="2" placeholder="Masukkan alamat lengkap"></textarea>
                                            <div class="error-message" id="alamatError"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="noHp" class="form-label"><i class="fas fa-phone"></i> Nomor HP/WhatsApp</label>
                                            <input type="text" class="form-control" id="noHp" placeholder="Contoh: 081234567890">
                                            <div class="error-message" id="noHpError"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="kecamatan" class="form-label"><i class="fas fa-map"></i> Kecamatan</label>
                                            <select class="form-select" id="kecamatan">
                                                <option value="">Pilih Kecamatan</option>
                                                <option value="Arjasa">Arjasa</option>
                                                <option value="Asembagus">Asembagus</option>
                                                <option value="Banyuglugur">Banyuglugur</option>
                                                <option value="Banyuputih">Banyuputih</option>
                                                <option value="Besuki">Besuki</option>
                                                <option value="Bungatan">Bungatan</option>
                                                <option value="Jangkar">Jangkar</option>
                                                <option value="Jatibanteng">Jatibanteng</option>
                                                <option value="Kapongan">Kapongan</option>
                                                <option value="Kendit">Kendit</option>
                                                <option value="Mangaran">Mangaran</option>
                                                <option value="Mlandingan">Mlandingan</option>
                                                <option value="Panarukan">Panarukan</option>
                                                <option value="Panji">Panji</option>
                                                <option value="Situbondo">Situbondo</option>
                                                <option value="Suboh">Suboh</option>
                                                <option value="Sumbermalang">Sumbermalang</option>
                                            </select>
                                            <div class="error-message" id="kecamatanError"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="desa" class="form-label"><i class="fas fa-map-marker-alt"></i> Desa/Kelurahan</label>
                                            <select class="form-select" id="desa">
                                                <option value="">Pilih Desa/Kelurahan</option>
                                                <!-- Opsi desa akan diisi oleh JavaScript -->
                                            </select>
                                            <div class="error-message" id="desaError"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="namaKelompok" class="form-label"><i class="fas fa-users"></i> Nama Kelompok</label>
                                            <input type="text" class="form-control" id="namaKelompok" placeholder="Masukkan nama kelompok">
                                            <div class="error-message" id="namaKelompokError"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="jabatan" class="form-label"><i class="fas fa-user-tie"></i> Jabatan</label>
                                            <select class="form-select" id="jabatan">
                                                <option value="">Pilih Jabatan</option>
                                                <option value="Ketua Kelompok">Ketua Kelompok</option>
                                                <option value="Sekretaris">Sekretaris</option>
                                                <option value="Bendahara">Bendahara</option>
                                                <option value="Pengawas">Pengawas</option>
                                                <option value="Anggota">Anggota</option>
                                            </select>
                                            <div class="error-message" id="jabatanError"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="jenisBantuan" class="form-label"><i class="fas fa-gift"></i> Jenis Bantuan</label>
                                            <select class="form-select" id="jenisBantuan">
                                                <option value="">Pilih Jenis Bantuan</option>
                                                <option value="Bantuan Langsung Tunai (BLT)">Bantuan Langsung Tunai (BLT)</option>
                                                <option value="Program Keluarga Harapan (PKH)">Program Keluarga Harapan (PKH)</option>
                                                <option value="Bantuan Pangan Non Tunai (BPNT)">Bantuan Pangan Non Tunai (BPNT)</option>
                                                <option value="Bantuan Sosial Tunai (BST)">Bantuan Sosial Tunai (BST)</option>
                                                <option value="Bantuan Presiden (Banpres)">Bantuan Presiden (Banpres)</option>
                                                <option value="Bantuan UMKM">Bantuan UMKM</option>
                                                <option value="Bantuan Pendidikan">Bantuan Pendidikan</option>
                                                <option value="Bantuan Kesehatan">Bantuan Kesehatan</option>
                                                <option value="Bantuan Lansia">Bantuan Lansia</option>
                                                <option value="Bantuan Disabilitas">Bantuan Disabilitas</option>
                                            </select>
                                            <div class="error-message" id="jenisBantuanError"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="tanggalTerima" class="form-label"><i class="fas fa-calendar"></i> Tanggal Menerima</label>
                                            <input type="date" class="form-control" id="tanggalTerima">
                                            <div class="error-message" id="tanggalTerimaError"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="jumlahBantuan" class="form-label"><i class="fas fa-money-bill-wave"></i> Jumlah Bantuan (Rp)</label>
                                            <input type="number" class="form-control" id="jumlahBantuan" placeholder="Masukkan jumlah bantuan">
                                            <div class="error-message" id="jumlahBantuanError"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="status" class="form-label"><i class="fas fa-check-circle"></i> Status</label>
                                            <select class="form-select" id="status">
                                                <option value="Pending">Pending</option>
                                                <option value="Terverifikasi">Terverifikasi</option>
                                                <option value="Ditolak">Ditolak</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="keterangan" class="form-label"><i class="fas fa-sticky-note"></i> Keterangan</label>
                                    <textarea class="form-control" id="keterangan" rows="3" placeholder="Tambahkan keterangan jika diperlukan"></textarea>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="driveLink" class="form-label"><i class="fab fa-google-drive"></i> Link Google Drive (Opsional)</label>
                                    <input type="url" class="form-control" id="driveLink" placeholder="https://drive.google.com/...">
                                    <div class="form-text">Link untuk menyimpan dokumen pendukung seperti foto atau scan berkas</div>
                                </div>
                                
                                <div class="d-flex justify-content-between mt-4">
                                    <button type="reset" class="btn btn-secondary">
                                        <i class="fas fa-eraser me-2"></i> Bersihkan Form
                                    </button>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save me-2"></i> Simpan Data
                                    </button>
                                </div>
                            </form>
                        </div>
                        
                        <!-- Kelola Data Tab -->
                        <div class="tab-pane fade" id="v-pills-data" role="tabpanel" aria-labelledby="v-pills-data-tab">
                            <h3 class="section-title">Kelola Data Penerima Bantuan</h3>
                            
                            <div class="filter-section">
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="mb-3">
                                            <label for="filterKecamatan" class="form-label">Filter Kecamatan</label>
                                            <select class="form-select" id="filterKecamatan">
                                                <option value="">Semua Kecamatan</option>
                                                <!-- Opsi kecamatan akan diisi oleh JavaScript -->
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="mb-3">
                                            <label for="filterDesa" class="form-label">Filter Desa</label>
                                            <select class="form-select" id="filterDesa">
                                                <option value="">Semua Desa</option>
                                                <!-- Opsi desa akan diisi oleh JavaScript -->
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="mb-3">
                                            <label for="filterStatus" class="form-label">Filter Status</label>
                                            <select class="form-select" id="filterStatus">
                                                <option value="">Semua Status</option>
                                                <option value="Pending">Pending</option>
                                                <option value="Terverifikasi">Terverifikasi</option>
                                                <option value="Ditolak">Ditolak</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="mb-3">
                                            <label for="searchInput" class="form-label">Cari Data</label>
                                            <input type="text" class="form-control" id="searchInput" placeholder="Cari nama, NIK, alamat...">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="d-flex justify-content-end">
                                    <button class="btn btn-outline-secondary me-2" id="resetFilter">
                                        <i class="fas fa-refresh me-2"></i> Reset Filter
                                    </button>
                                    <button class="btn btn-primary" id="applyFilter">
                                        <i class="fas fa-filter me-2"></i> Terapkan Filter
                                    </button>
                                </div>
                            </div>
                            
                            <div class="table-responsive">
                                <table class="table table-hover data-table" id="dataTable">
                                    <thead>
                                        <tr>
                                            <th>No</th>
                                            <th>Nama</th>
                                            <th>NIK</th>
                                            <th>Desa</th>
                                            <th>Jenis Bantuan</th>
                                            <th>Tanggal</th>
                                            <th>Status</th>
                                            <th>Aksi</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Data akan diisi oleh JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="d-flex justify-content-between align-items-center mt-3">
                                <div class="fw-bold" id="tableInfo">Menampilkan 0 dari 0 data</div>
                                <nav>
                                    <ul class="pagination" id="pagination">
                                        <!-- Pagination akan diisi oleh JavaScript -->
                                    </ul>
                                </nav>
                            </div>
                        </div>
                        
                        <!-- Statistik Tab -->
                        <div class="tab-pane fade" id="v-pills-stats" role="tabpanel" aria-labelledby="v-pills-stats-tab">
                            <h3 class="section-title">Statistik Data Bantuan</h3>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-chart-bar me-2"></i> Bantuan per Kecamatan
                                        </div>
                                        <div class="card-body">
                                            <canvas id="kecamatanChart" height="300"></canvas>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-chart-pie me-2"></i> Bantuan per Jenis
                                        </div>
                                        <div class="card-body">
                                            <canvas id="jenisBantuanChart" height="300"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row mt-4">
                                <div class="col-md-12">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-table me-2"></i> Data Statistik per Desa
                                        </div>
                                        <div class="card-body">
                                            <div class="table-responsive">
                                                <table class="table table-hover data-table" id="statsTable">
                                                    <thead>
                                                        <tr>
                                                            <th>No</th>
                                                            <th>Desa</th>
                                                            <th>Jumlah Penerima</th>
                                                            <th>Terverifikasi</th>
                                                            <th>Pending</th>
                                                            <th>Ditolak</th>
                                                            <th>Total Bantuan (Rp)</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <!-- Data akan diisi oleh JavaScript -->
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Ekspor Data Tab -->
                        <div class="tab-pane fade" id="v-pills-export" role="tabpanel" aria-labelledby="v-pills-export-tab">
                            <h3 class="section-title">Ekspor Data Penerima Bantuan</h3>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-file-excel me-2"></i> Ekspor ke Excel
                                        </div>
                                        <div class="card-body">
                                            <p>Ekspor data ke format Excel untuk analisis lebih lanjut atau untuk keperluan administrasi.</p>
                                            <div class="mb-3">
                                                <label class="form-label">Filter Data yang Diekspor</label>
                                                <select class="form-select" id="exportFilter">
                                                    <option value="all">Semua Data</option>
                                                    <option value="verified">Hanya Terverifikasi</option>
                                                    <option value="pending">Hanya Pending</option>
                                                    <option value="rejected">Hanya Ditolak</option>
                                                </select>
                                            </div>
                                            <button class="btn btn-success w-100" id="exportExcelBtn">
                                                <i class="fas fa-file-excel me-2"></i> Ekspor ke Excel
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-file-pdf me-2"></i> Ekspor ke PDF
                                        </div>
                                        <div class="card-body">
                                            <p>Ekspor data ke format PDF untuk dicetak atau dibagikan sebagai dokumen resmi.</p>
                                            <div class="mb-3">
                                                <label class="form-label">Filter Data yang Diekspor</label>
                                                <select class="form-select" id="pdfFilter">
                                                    <option value="all">Semua Data</option>
                                                    <option value="verified">Hanya Terverifikasi</option>
                                                    <option value="pending">Hanya Pending</option>
                                                    <option value="rejected">Hanya Ditolak</option>
                                                </select>
                                            </div>
                                            <button class="btn btn-danger w-100" id="exportPdfBtn">
                                                <i class="fas fa-file-pdf me-2"></i> Ekspor ke PDF
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row mt-4">
                                <div class="col-md-12">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-print me-2"></i> Cetak Laporan
                                        </div>
                                        <div class="card-body">
                                            <p>Cetak laporan data penerima bantuan dengan berbagai filter sesuai kebutuhan.</p>
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <div class="mb-3">
                                                        <label class="form-label">Kecamatan</label>
                                                        <select class="form-select" id="printKecamatan">
                                                            <option value="">Semua Kecamatan</option>
                                                            <!-- Opsi kecamatan akan diisi oleh JavaScript -->
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="mb-3">
                                                        <label class="form-label">Desa</label>
                                                        <select class="form-select" id="printDesa">
                                                            <option value="">Semua Desa</option>
                                                            <!-- Opsi desa akan diisi oleh JavaScript -->
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="mb-3">
                                                        <label class="form-label">Status</label>
                                                        <select class="form-select" id="printStatus">
                                                            <option value="">Semua Status</option>
                                                            <option value="Terverifikasi">Terverifikasi</option>
                                                            <option value="Pending">Pending</option>
                                                            <option value="Ditolak">Ditolak</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <button class="btn btn-primary w-100" id="printReportBtn">
                                                <i class="fas fa-print me-2"></i> Cetak Laporan
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pengaturan Tab -->
                        <div class="tab-pane fade" id="v-pills-settings" role="tabpanel" aria-labelledby="v-pills-settings-tab">
                            <h3 class="section-title">Pengaturan Aplikasi</h3>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-database me-2"></i> Manajemen Data
                                        </div>
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label class="form-label">Cadangkan Data</label>
                                                <p class="form-text">Simpan salinan data ke file JSON untuk keperluan cadangan.</p>
                                                <button class="btn btn-outline-primary w-100" id="backupDataBtn">
                                                    <i class="fas fa-download me-2"></i> Cadangkan Data
                                                </button>
                                            </div>
                                            <hr>
                                            <div class="mb-3">
                                                <label class="form-label">Pulihkan Data</label>
                                                <p class="form-text">Pulihkan data dari file JSON yang sebelumnya telah dicadangkan.</p>
                                                <input type="file" class="form-control mb-2" id="restoreFileInput" accept=".json">
                                                <button class="btn btn-outline-success w-100" id="restoreDataBtn" disabled>
                                                    <i class="fas fa-upload me-2"></i> Pulihkan Data
                                                </button>
                                            </div>
                                            <hr>
                                            <div class="mb-3">
                                                <label class="form-label">Hapus Semua Data</label>
                                                <p class="form-text">Hapus semua data dari aplikasi. Tindakan ini tidak dapat dibatalkan!</p>
                                                <button class="btn btn-outline-danger w-100" id="clearDataBtn">
                                                    <i class="fas fa-trash me-2"></i> Hapus Semua Data
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-key me-2"></i> Keamanan
                                        </div>
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label class="form-label">Ubah Kode Keamanan</label>
                                                <p class="form-text">Ubah kode keamanan untuk mengakses aplikasi.</p>
                                                <div class="kode-validasi-container">
                                                    <input type="password" class="form-control kode-validasi-input" id="newSecurityCode" placeholder="Masukkan kode keamanan baru">
                                                    <button class="btn btn-primary btn-generate-kode" id="generateCodeBtn">
                                                        <i class="fas fa-sync-alt"></i>
                                                    </button>
                                                </div>
                                                <div class="form-text">Klik tombol untuk menghasilkan kode acak</div>
                                                <button class="btn btn-primary w-100 mt-2" id="changeSecurityCodeBtn">
                                                    <i class="fas fa-save me-2"></i> Simpan Kode Baru
                                                </button>
                                            </div>
                                            <hr>
                                            <div class="mb-3">
                                                <label class="form-label">Reset Login Attempts</label>
                                                <p class="form-text">Reset percobaan login yang gagal dan buka kunci aplikasi.</p>
                                                <button class="btn btn-outline-warning w-100" id="resetLoginBtn">
                                                    <i class="fas fa-unlock me-2"></i> Reset Percobaan Login
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row mt-4">
                                <div class="col-md-12">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-info-circle me-2"></i> Informasi Aplikasi
                                        </div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <table class="table table-borderless">
                                                        <tr>
                                                            <th width="40%">Nama Aplikasi</th>
                                                            <td>BARJAS - Sistem Bantuan Terpadu</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Versi</th>
                                                            <td>v2.0.1</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Tangril Rilis</th>
                                                            <td>15 Agustus 2025</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Developer</th>
                                                            <td>Lentera Karya Situbondo</td>
                                                        </tr>
                                                    </table>
                                                </div>
                                                <div class="col-md-6">
                                                    <table class="table table-borderless">
                                                        <tr>
                                                            <th width="40%">Total Data</th>
                                                            <td id="infoTotalData">0</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Browser</th>
                                                            <td id="infoBrowser"></td>
                                                        </tr>
                                                        <tr>
                                                            <th>Local Storage</th>
                                                            <td id="infoStorage">Tersedia</td>
                                                        </tr>
                                                        <tr>
                                                            <th>Ukuran Data</th>
                                                            <td id="infoDataSize">0 KB</td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Bantuan Tab -->
                        <div class="tab-pane fade" id="v-pills-help" role="tabpanel" aria-labelledby="v-pills-help-tab">
                            <h3 class="section-title">Panduan Penggunaan Aplikasi</h3>
                            
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-book me-2"></i> Panduan Lengkap
                                        </div>
                                        <div class="card-body">
                                            <div class="accordion" id="helpAccordion">
                                                <div class="accordion-item">
                                                    <h2 class="accordion-header">
                                                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#help1" aria-expanded="true" aria-controls="help1">
                                                            Cara Input Data Penerima Bantuan
                                                        </button>
                                                    </h2>
                                                    <div id="help1" class="accordion-collapse collapse show" data-bs-parent="#helpAccordion">
                                                        <div class="accordion-body">
                                                            <ol>
                                                                <li>Buka menu <strong>Input Data</strong> dari sidebar navigasi</li>
                                                                <li>Isi semua field yang wajib diisi (ditandai dengan asterisk)</li>
                                                                <li>Pastikan data yang dimasukkan sudah benar dan valid</li>
                                                                <li>Klik tombol <strong>Simpan Data</strong> untuk menyimpan data</li>
                                                                <li>Data akan tersimpan di local storage browser Anda</li>
                                                            </ol>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="accordion-item">
                                                    <h2 class="accordion-header">
                                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#help2" aria-expanded="false" aria-controls="help2">
                                                            Cara Mengelola dan Mencari Data
                                                        </button>
                                                    </h2>
                                                    <div id="help2" class="accordion-collapse collapse" data-bs-parent="#helpAccordion">
                                                        <div class="accordion-body">
                                                            <ol>
                                                                <li>Buka menu <strong>Kelola Data</strong> dari sidebar navigasi</li>
                                                                <li>Gunakan filter yang tersedia untuk mempersempit pencarian</li>
                                                                <li>Gunakan kotak pencarian untuk mencari data berdasarkan nama, NIK, atau alamat</li>
                                                                <li>Klik tombol <strong>Edit</strong> untuk mengubah data yang sudah ada</li>
                                                                <li>Klik tombol <strong>Hapus</strong> untuk menghapus data yang dipilih</li>
                                                            </ol>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="accordion-item">
                                                    <h2 class="accordion-header">
                                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#help3" aria-expanded="false" aria-controls="help3">
                                                            Cara Mencetak dan Mengekspor Data
                                                        </button>
                                                    </h2>
                                                    <div id="help3" class="accordion-collapse collapse" data-bs-parent="#helpAccordion">
                                                        <div class="accordion-body">
                                                            <ol>
                                                                <li>Buka menu <strong>Ekspor Data</strong> dari sidebar navigasi</li>
                                                                <li>Pilih format ekspor yang diinginkan (Excel atau PDF)</li>
                                                                <li>Atur filter data jika diperlukan</li>
                                                                <li>Klik tombol ekspor untuk mengunduh data</li>
                                                                <li>Untuk mencetak, gunakan tombol <strong>Cetak Laporan</strong> setelah mengatur filter</li>
                                                            </ol>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="accordion-item">
                                                    <h2 class="accordion-header">
                                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#help4" aria-expanded="false" aria-controls="help4">
                                                            Pengaturan Keamanan Aplikasi
                                                        </button>
                                                    </h2>
                                                    <div id="help4" class="accordion-collapse collapse" data-bs-parent="#helpAccordion">
                                                        <div class="accordion-body">
                                                            <ol>
                                                                <li>Buka menu <strong>Pengaturan</strong> dari sidebar navigasi</li>
                                                                <li>Untuk mengubah kode keamanan, masukkan kode baru di bagian Keamanan</li>
                                                                <li>Gunakan tombol generate untuk membuat kode acak</li>
                                                                <li>Selalu ingat kode keamanan Anda, karena diperlukan untuk masuk ke aplikasi</li>
                                                                <li>Gunakan fitur cadangan data secara berkala untuk mencegah kehilangan data</li>
                                                            </ol>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row mt-4">
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-question-circle me-2"></i> Pertanyaan Umum
                                        </div>
                                        <div class="card-body">
                                            <div class="accordion" id="faqAccordion">
                                                <div class="accordion-item">
                                                    <h2 class="accordion-header">
                                                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1" aria-expanded="true" aria-controls="faq1">
                                                            Apa yang harus dilakukan jika lupa kode keamanan?
                                                        </button>
                                                    </h2>
                                                    <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                                                        <div class="accordion-body">
                                                            Hubungi developer aplikasi di <strong>+62 856-4770-9114</strong> untuk reset kode keamanan. Proses reset akan menghapus semua data yang tersimpan.
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="accordion-item">
                                                    <h2 class="accordion-header">
                                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2" aria-expanded="false" aria-controls="faq2">
                                                            Bagaimana cara mencadangkan data?
                                                        </button>
                                                    </h2>
                                                    <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                                        <div class="accordion-body">
                                                            Buka menu <strong>Pengaturan</strong> > <strong>Manajemen Data</strong> > klik tombol <strong>Cadangkan Data</strong>. File JSON akan diunduh ke perangkat Anda.
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="accordion-item">
                                                    <h2 class="accordion-header">
                                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3" aria-expanded="false" aria-controls="faq3">
                                                            Data disimpan di mana? Apakah aman?
                                                        </button>
                                                    </h2>
                                                    <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                                        <div class="accordion-body">
                                                            Data disimpan di local storage browser Anda dan hanya dapat diakses melalui browser yang sama. Untuk keamanan ekstra, gunakan fitur cadangan data secara berkala.
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-life-ring me-2"></i> Dukungan Teknis
                                        </div>
                                        <div class="card-body">
                                            <p>Jika Anda mengalami kendala teknis atau memiliki pertanyaan tentang penggunaan aplikasi, hubungi tim dukungan kami:</p>
                                            <div class="developer-contact">
                                                <p><i class="fab fa-whatsapp me-2"></i> <a href="https://wa.me/6285647709114" target="_blank" class="whatsapp-link">+62 856-4770-9114</a></p>
                                                <p><i class="fas fa-envelope me-2"></i> <a href="mailto:admin@anekamarket.my.id">admin@anekamarket.my.id</a></p>
                                                <p><i class="fas fa-clock me-2"></i> Senin - Jumat, 08:00 - 17:00 WIB</p>
                                            </div>
                                            <div class="mt-3">
                                                <p class="mb-1">Laporkan masalah teknis:</p>
                                                <button class="btn btn-outline-primary btn-sm" id="reportIssueBtn">
                                                    <i class="fas fa-bug me-2"></i> Laporkan Bug
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="copyright">
                &copy; 2025 BARJAS - Sistem Bantuan Terpadu. Hak Cipta Dilindungi.
            </div>
        </div>
        
        <!-- Floating Action Button -->
        <div class="floating-action-btn" id="fabButton">
            <i class="fas fa-plus"></i>
        </div>
    </div>
    
    <!-- Toast Notification -->
    <div class="toast notification-toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-autohide="true" data-bs-delay="5000">
        <div class="toast-header">
            <i class="fas fa-info-circle me-2 text-primary"></i>
            <strong class="me-auto">BARJAS Notification</strong>
            <small>Just now</small>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body">
            <!-- Toast message will be inserted here -->
        </div>
    </div>
    
    <!-- Modal untuk Edit Data -->
    <div class="modal fade" id="editModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Edit Data Penerima Bantuan</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editForm">
                        <input type="hidden" id="editId">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editNama" class="form-label">Nama Lengkap</label>
                                    <input type="text" class="form-control" id="editNama">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editNik" class="form-label">NIK</label>
                                    <input type="text" class="form-control" id="editNik">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editAlamat" class="form-label">Alamat</label>
                                    <textarea class="form-control" id="editAlamat" rows="2"></textarea>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editNoHp" class="form-label">Nomor HP/WhatsApp</label>
                                    <input type="text" class="form-control" id="editNoHp">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editKecamatan" class="form-label">Kecamatan</label>
                                    <select class="form-select" id="editKecamatan">
                                        <!-- Opsi kecamatan akan diisi oleh JavaScript -->
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editDesa" class="form-label">Desa/Kelurahan</label>
                                    <select class="form-select" id="editDesa">
                                        <!-- Opsi desa akan diisi oleh JavaScript -->
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editNamaKelompok" class="form-label">Nama Kelompok</label>
                                    <input type="text" class="form-control" id="editNamaKelompok">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editJabatan" class="form-label">Jabatan</label>
                                    <select class="form-select" id="editJabatan">
                                        <option value="">Pilih Jabatan</option>
                                        <option value="Ketua Kelompok">Ketua Kelompok</option>
                                        <option value="Sekretaris">Sekretaris</option>
                                        <option value="Bendahara">Bendahara</option>
                                        <option value="Pengawas">Pengawas</option>
                                        <option value="Anggota">Anggota</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editJenisBantuan" class="form-label">Jenis Bantuan</label>
                                    <select class="form-select" id="editJenisBantuan">
                                        <!-- Opsi jenis bantuan akan diisi oleh JavaScript -->
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editTanggalTerima" class="form-label">Tanggal Menerima</label>
                                    <input type="date" class="form-control" id="editTanggalTerima">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editJumlahBantuan" class="form-label">Jumlah Bantuan (Rp)</label>
                                    <input type="number" class="form-control" id="editJumlahBantuan">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="editStatus" class="form-label">Status</label>
                                    <select class="form-select" id="editStatus">
                                        <option value="Pending">Pending</option>
                                        <option value="Terverifikasi">Terverifikasi</option>
                                        <option value="Ditolak">Ditolak</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="editKeterangan" class="form-label">Keterangan</label>
                            <textarea class="form-control" id="editKeterangan" rows="3"></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label for="editDriveLink" class="form-label">Link Google Drive</label>
                            <input type="url" class="form-control" id="editDriveLink">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-primary" id="saveEditBtn">Simpan Perubahan</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal untuk Konfirmasi Hapus -->
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Konfirmasi Hapus Data</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Apakah Anda yakin ingin menghapus data ini? Tindakan ini tidak dapat dibatalkan.</p>
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle me-2"></i> Data yang dihapus tidak dapat dikembalikan.
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Hapus Data</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal untuk Konfirmasi Hapus Semua Data -->
    <div class="modal fade" id="clearAllModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Konfirmasi Hapus Semua Data</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Apakah Anda yakin ingin menghapus semua data? Tindakan ini tidak dapat dibatalkan.</p>
                    <div class="alert alert-danger">
                        <i class="fas fa-exclamation-circle me-2"></i> Semua data akan dihapus permanen dan tidak dapat dikembalikan.
                    </div>
                    <div class="mb-3">
                        <label for="clearConfirmText" class="form-label">Ketik "HAPUS SEMUA" untuk konfirmasi</label>
                        <input type="text" class="form-control" id="clearConfirmText" placeholder="HAPUS SEMUA">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-danger" id="confirmClearAllBtn" disabled>Hapus Semua Data</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal untuk Detail Data -->
    <div class="modal fade" id="detailModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Detail Data Penerima Bantuan</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <table class="table table-borderless">
                                <tr>
                                    <th width="40%">Nama Lengkap</th>
                                    <td id="detailNama"></td>
                                </tr>
                                <tr>
                                    <th>NIK</th>
                                    <td id="detailNik"></td>
                                </tr>
                                <tr>
                                    <th>Alamat</th>
                                    <td id="detailAlamat"></td>
                                </tr>
                                <tr>
                                    <th>No. HP/WhatsApp</th>
                                    <td id="detailNoHp"></td>
                                </tr>
                                <tr>
                                    <th>Kecamatan</th>
                                    <td id="detailKecamatan"></td>
                                </tr>
                                <tr>
                                    <th>Desa/Kelurahan</th>
                                    <td id="detailDesa"></td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-md-6">
                            <table class="table table-borderless">
                                <tr>
                                    <th width="40%">Nama Kelompok</th>
                                    <td id="detailNamaKelompok"></td>
                                </tr>
                                <tr>
                                    <th>Jabatan</th>
                                    <td id="detailJabatan"></td>
                                </tr>
                                <tr>
                                    <th>Jenis Bantuan</th>
                                    <td id="detailJenisBantuan"></td>
                                </tr>
                                <tr>
                                    <th>Tanggal Terima</th>
                                    <td id="detailTanggalTerima"></td>
                                </tr>
                                <tr>
                                    <th>Jumlah Bantuan</th>
                                    <td id="detailJumlahBantuan"></td>
                                </tr>
                                <tr>
                                    <th>Status</th>
                                    <td><span class="badge" id="detailStatusBadge"></span></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    
                    <div class="row mt-3">
                        <div class="col-12">
                            <table class="table table-borderless">
                                <tr>
                                    <th width="15%">Keterangan</th>
                                    <td id="detailKeterangan"></td>
                                </tr>
                                <tr>
                                    <th>Link Dokumen</th>
                                    <td>
                                        <a href="#" id="detailDriveLink" target="_blank" class="drive-link">
                                            <i class="fab fa-google-drive me-2"></i> Lihat Dokumen di Google Drive
                                        </a>
                                        <span id="detailNoLink" class="text-muted">Tidak ada link dokumen</span>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                    <button type="button" class="btn btn-primary" id="detailEditBtn">Edit Data</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal untuk Menambah Link Google Drive -->
    <div class="modal fade link-modal" id="addLinkModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Tambah Link Google Drive</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="newDriveLink" class="form-label">Link Google Drive</label>
                        <input type="url" class="form-control" id="newDriveLink" placeholder="https://drive.google.com/...">
                    </div>
                    <div class="form-text">
                        Masukkan link Google Drive yang berisi dokumen pendukung seperti foto atau scan berkas.
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-primary" id="saveLinkBtn">Simpan Link</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script>
        // Daftar desa di Kabupaten Situbondo
        const desaList = [
            "Agel", "Alas Bayur", "Alasmalang", "Alastengah", "Arjasa", "Ardirejo", "Asembagus", 
            "Awar-awar", "Awang-awang", "Baderan", "Balung", "Bantal", "Battal", "Bayeman", "Besuki", "Bletok", "Blimbing", "Bloro", "Buduan", "Bugeman", "Bungatan", 
            "Campoan", "Cemara", "Curah Cottok", "Curah Jeru", "Curah Kalak", "Curah Suri", "Curah Tatal", "Dawuhan", "Demung", "Duwet", "Gadingan", "Gebangan", 
            "Gelung", "Gudang", "Gunung Malang", "Gunung Putri", "Jangkar", "Jatisari", "Jatibanteng", "Jetis", "Juglangan", "Kalianget", "Kalibagor", "Kalimas", 
            "Kalirejo", "Kalisari", "Kandang", "Kayu Putih", "Kayumas", "Kedungdowo", "Kedunglo", "Kembangsari", "Ketah", "Ketowan", "Kilensari", "Klampokan", 
            "Klatakan", "Kotakan", "Kumbangsari", "Kukusan", "Lamongan", "Landangan", "Langkap", "Lebeng", "Lubawang", "Mangaran", "Mimbaan", "Mlandingan Kulon", 
            "Mlandingan Wetan", "Mojodungkol", "Mojosari", "Olean", "Palangan", "Panarukan", "Panji Kidul", "Panji Lor", "Parante", "Pasir Putih", "Patemon", 
            "Patokan", "Paowan", "Peleyan", "Pesisir", "Pesanggrahan", "Pategalan", "Patemon", "Plalangan", "Pokaan", "Rajekwesi", "Seletreng", "Selobanteng", 
            "Selomukti", "Selowogo", "Semambung", "Semiring", "Sliwung", "Sopet", "Sumber Pinang", "Sumberanyar", "Sumberargo", "Sumberkolak", "Sumberejo", 
            "Sumbertengah", "Sumberwaru", "Tamankursi", "Tamansari", "Taman", "Talkandang", "Tanjung Glugur", "Tanjung Kamal", "Tanjung Pecinan", "Tambak Ukir", 
            "Telempong", "Tenggir", "Tepos", "Tokelan", "Tlogosari", "Trigonco", "Trebungan", "Widoropayung", "Wonokoyo", "Wonorejo", "Wringinanom"
        ];
        
        // Kecamatan list
        const kecamatanList = [
            "Arjasa", "Asembagus", "Banyuglugur", "Banyuputih", "Besuki", "Bungatan", "Jangkar", 
            "Jatibanteng", "Kapongan", "Kendit", "Mangaran", "Mlandingan", "Panarukan", 
            "Panji", "Situbondo", "Suboh", "Sumbermalang"
        ];
        
        // Jenis bantuan list
        const jenisBantuanList = [
            "Bantuan Langsung Tunai (BLT)",
            "Program Keluarga Harapan (PKH)",
            "Bantuan Pangan Non Tunai (BPNT)",
            "Bantuan Sosial Tunai (BST)",
            "Bantuan Presiden (Banpres)",
            "Bantuan UMKM",
            "Bantuan Pendidikan",
            "Bantuan Kesehatan",
            "Bantuan Lansia",
            "Bantuan Disabilitas"
        ];
        
        // Inisialisasi aplikasi
        document.addEventListener('DOMContentLoaded', function() {
            // Tampilkan splash screen pertama kali
            showSplashScreen();
            
            // Inisialisasi komponen UI
            initializeUI();
            
            // Inisialisasi data
            initializeData();
            
            // Setup event listeners
            setupEventListeners();
            
            // Tampilkan modal login setelah splash screen selesai
            setTimeout(() => {
                $('#loginModal').modal('show');
            }, 5000);
        });
        
        // Fungsi untuk menampilkan splash screen
        function showSplashScreen() {
            let countdown = 5;
            const countdownElement = document.getElementById('countdownTimer');
            const countdownInterval = setInterval(() => {
                countdown--;
                countdownElement.textContent = countdown;
                
                if (countdown <= 0) {
                    clearInterval(countdownInterval);
                    document.getElementById('welcomeSplash').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('welcomeSplash').style.display = 'none';
                    }, 500);
                }
            }, 1000);
            
            // Close splash screen manually
            document.getElementById('closeSplash').addEventListener('click', function() {
                clearInterval(countdownInterval);
                document.getElementById('welcomeSplash').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('welcomeSplash').style.display = 'none';
                }, 500);
            });
        }
        
        // Fungsi untuk inisialisasi UI
        function initializeUI() {
            // Isi dropdown desa
            const desaDropdown = document.getElementById('desa');
            desaList.forEach(desa => {
                const option = document.createElement('option');
                option.value = desa;
                option.textContent = desa;
                desaDropdown.appendChild(option);
            });
            
            // Isi dropdown kecamatan untuk filter
            const kecamatanFilter = document.getElementById('filterKecamatan');
            kecamatanList.forEach(kecamatan => {
                const option = document.createElement('option');
                option.value = kecamatan;
                option.textContent = kecamatan;
                kecamatanFilter.appendChild(option);
            });
            
            // Isi dropdown kecamatan untuk print
            const printKecamatan = document.getElementById('printKecamatan');
            kecamatanList.forEach(kecamatan => {
                const option = document.createElement('option');
                option.value = kecamatan;
                option.textContent = kecamatan;
                printKecamatan.appendChild(option);
            });
            
            // Isi dropdown desa untuk filter
            const desaFilter = document.getElementById('filterDesa');
            desaList.forEach(desa => {
                const option = document.createElement('option');
                option.value = desa;
                option.textContent = desa;
                desaFilter.appendChild(option);
            });
            
            // Isi dropdown desa untuk print
            const printDesa = document.getElementById('printDesa');
            desaList.forEach(desa => {
                const option = document.createElement('option');
                option.value = desa;
                option.textContent = desa;
                printDesa.appendChild(option);
            });
            
            // Isi dropdown jenis bantuan untuk edit
            const editJenisBantuan = document.getElementById('editJenisBantuan');
            jenisBantuanList.forEach(jenis => {
                const option = document.createElement('option');
                option.value = jenis;
                option.textContent = jenis;
                editJenisBantuan.appendChild(option);
            });
            
            // Isi dropdown kecamatan untuk edit
            const editKecamatan = document.getElementById('editKecamatan');
            kecamatanList.forEach(kecamatan => {
                const option = document.createElement('option');
                option.value = kecamatan;
                option.textContent = kecamatan;
                editKecamatan.appendChild(option);
            });
            
            // Isi dropdown desa untuk edit
            const editDesa = document.getElementById('editDesa');
            desaList.forEach(desa => {
                const option = document.createElement('option');
                option.value = desa;
                option.textContent = desa;
                editDesa.appendChild(option);
            });
        }
        
        // Fungsi untuk inisialisasi data
        function initializeData() {
            // Cek apakah data sudah ada di local storage
            if (!localStorage.getItem('barjasData')) {
                // Jika tidak, inisialisasi dengan array kosong
                localStorage.setItem('barjasData', JSON.stringify([]));
            }
            
            // Cek apakah kode keamanan sudah diset
            if (!localStorage.getItem('securityCode')) {
                // Jika tidak, set kode default
                localStorage.setItem('securityCode', '123456');
            }
            
            // Load data ke tabel
            loadDataTable();
            
            // Update dashboard stats
            updateDashboardStats();
        }
        
        // Fungsi untuk setup event listeners
        function setupEventListeners() {
            // Login form submission
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                handleLogin();
            });
            
            // Toggle password visibility
            document.querySelector('.toggle-password').addEventListener('click', function() {
                const passwordInput = document.getElementById('securityCode');
                const icon = this.querySelector('i');
                
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.classList.remove('fa-eye');
                    icon.classList.add('fa-eye-slash');
                } else {
                    passwordInput.type = 'password';
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                }
            });
            
            // Input form submission
            document.getElementById('inputForm').addEventListener('submit', function(e) {
                e.preventDefault();
                saveData();
            });
            
            // Filter application
            document.getElementById('applyFilter').addEventListener('click', function() {
                loadDataTable();
            });
            
            // Reset filter
            document.getElementById('resetFilter').addEventListener('click', function() {
                document.getElementById('filterKecamatan').value = '';
                document.getElementById('filterDesa').value = '';
                document.getElementById('filterStatus').value = '';
                document.getElementById('searchInput').value = '';
                loadDataTable();
            });
            
            // Search input
            document.getElementById('searchInput').addEventListener('keyup', function() {
                loadDataTable();
            });
            
            // Export to Excel
            document.getElementById('exportExcelBtn').addEventListener('click', function() {
                exportToExcel();
            });
            
            // Export to PDF
            document.getElementById('exportPdfBtn').addEventListener('click', function() {
                exportToPDF();
            });
            
            // Print report
            document.getElementById('printReportBtn').addEventListener('click', function() {
                printReport();
            });
            
            // Backup data
            document.getElementById('backupDataBtn').addEventListener('click', function() {
                backupData();
            });
            
            // Restore data file input change
            document.getElementById('restoreFileInput').addEventListener('change', function() {
                document.getElementById('restoreDataBtn').disabled = !this.files.length;
            });
            
            // Restore data
            document.getElementById('restoreDataBtn').addEventListener('click', function() {
                restoreData();
            });
            
            // Clear all data
            document.getElementById('clearDataBtn').addEventListener('click', function() {
                $('#clearAllModal').modal('show');
            });
            
            // Confirm clear all data
            document.getElementById('confirmClearAllBtn').addEventListener('click', function() {
                clearAllData();
            });
            
            // Clear confirmation text input
            document.getElementById('clearConfirmText').addEventListener('input', function() {
                document.getElementById('confirmClearAllBtn').disabled = 
                    this.value.toUpperCase() !== 'HAPUS SEMUA';
            });
            
            // Generate security code
            document.getElementById('generateCodeBtn').addEventListener('click', function() {
                generateSecurityCode();
            });
            
            // Change security code
            document.getElementById('changeSecurityCodeBtn').addEventListener('click', function() {
                changeSecurityCode();
            });
            
            // Reset login attempts
            document.getElementById('resetLoginBtn').addEventListener('click', function() {
                resetLoginAttempts();
            });
            
            // Logout button
            document.getElementById('logoutButton').addEventListener('click', function() {
                logout();
            });
            
            // Mobile menu button
            document.getElementById('mobileMenuBtn').addEventListener('click', function() {
                document.getElementById('sidebarMenu').classList.toggle('mobile-show');
                document.getElementById('sidebarOverlay').classList.toggle('mobile-show');
            });
            
            // Sidebar overlay click
            document.getElementById('sidebarOverlay').addEventListener('click', function() {
                this.classList.remove('mobile-show');
                document.getElementById('sidebarMenu').classList.remove('mobile-show');
            });
            
            // Floating action button
            document.getElementById('fabButton').addEventListener('click', function() {
                // Switch to input data tab
                document.getElementById('v-pills-input-tab').click();
                
                // Scroll to form
                document.getElementById('inputForm').scrollIntoView({ behavior: 'smooth' });
            });
            
            // Report issue button
            document.getElementById('reportIssueBtn').addEventListener('click', function() {
                window.open('https://wa.me/6285647709114?text=Saya%20mengalami%20kendala%20dengan%20aplikasi%20BARJAS', '_blank');
            });
        }
        
        // Fungsi untuk menangani login
        function handleLogin() {
            const securityCode = document.getElementById('securityCode').value;
            const storedCode = localStorage.getItem('securityCode');
            const loginButton = document.getElementById('loginButton');
            const loginSpinner = document.getElementById('loginSpinner');
            const loginButtonText = document.querySelector('.login-button-text');
            
            // Get login attempts from localStorage or initialize
            let loginAttempts = localStorage.getItem('loginAttempts') || 0;
            let lastAttemptTime = localStorage.getItem('lastAttemptTime') || 0;
            const currentTime = new Date().getTime();
            const blockDuration = 30000; // 30 seconds
            
            // Check if user is blocked
            if (loginAttempts >= 3 && (currentTime - lastAttemptTime) < blockDuration) {
                const remainingTime = Math.ceil((blockDuration - (currentTime - lastAttemptTime)) / 1000);
                showBlockedMessage(remainingTime);
                return;
            }
            
            // Show loading state
            loginButton.disabled = true;
            loginSpinner.classList.remove('d-none');
            loginButtonText.textContent = 'Memverifikasi...';
            
            // Simulate network delay
            setTimeout(() => {
                if (securityCode === storedCode) {
                    // Successful login
                    localStorage.setItem('loginAttempts', 0);
                    localStorage.setItem('lastAttemptTime', 0);
                    
                    $('#loginModal').modal('hide');
                    document.getElementById('appContent').classList.remove('app-content-unauthenticated');
                    
                    showToast('Login berhasil! Selamat datang di aplikasi BARJAS.', 'success');
                } else {
                    // Failed login
                    loginAttempts++;
                    localStorage.setItem('loginAttempts', loginAttempts);
                    localStorage.setItem('lastAttemptTime', currentTime);
                    
                    if (loginAttempts >= 3) {
                        showBlockedMessage(30);
                    } else {
                        const attemptsLeft = 3 - loginAttempts;
                        document.getElementById('attemptsCount').textContent = 
                            `Kode salah! Percobaan ${loginAttempts} dari 3. ${attemptsLeft} percobaan tersisa.`;
                        
                        // Shake animation for error
                        document.getElementById('loginForm').classList.add('login-shake');
                        setTimeout(() => {
                            document.getElementById('loginForm').classList.remove('login-shake');
                        }, 600);
                        
                        showToast('Kode keamanan salah! Silakan coba lagi.', 'error');
                    }
                }
                
                // Reset loading state
                loginButton.disabled = false;
                loginSpinner.classList.add('d-none');
                loginButtonText.textContent = 'Masuk ke Aplikasi';
            }, 1000);
        }
        
        // Fungsi untuk menampilkan pesan blokir
        function showBlockedMessage(seconds) {
            const blockedMessage = document.getElementById('blockedMessage');
            const countdownElement = document.getElementById('countdown');
            const blockedText = document.getElementById('blockedText');
            const attemptsCount = document.getElementById('attemptsCount');
            
            blockedMessage.classList.remove('d-none');
            attemptsCount.textContent = '';
            
            let remaining = seconds;
            countdownElement.textContent = remaining;
            
            const countdownInterval = setInterval(() => {
                remaining--;
                countdownElement.textContent = remaining;
                
                if (remaining <= 0) {
                    clearInterval(countdownInterval);
                    blockedMessage.classList.add('d-none');
                    localStorage.setItem('loginAttempts', 0);
                }
            }, 1000);
        }
        
        // Fungsi untuk menyimpan data
        function saveData() {
            // Validasi form
            if (!validateForm()) {
                showToast('Harap isi semua field yang wajib diisi!', 'error');
                return;
            }
            
            // Ambil data dari form
            const data = {
                id: Date.now(), // ID unik berdasarkan timestamp
                nama: document.getElementById('nama').value,
                nik: document.getElementById('nik').value,
                alamat: document.getElementById('alamat').value,
                noHp: document.getElementById('noHp').value,
                kecamatan: document.getElementById('kecamatan').value,
                desa: document.getElementById('desa').value,
                namaKelompok: document.getElementById('namaKelompok').value,
                jabatan: document.getElementById('jabatan').value,
                jenisBantuan: document.getElementById('jenisBantuan').value,
                tanggalTerima: document.getElementById('tanggalTerima').value,
                jumlahBantuan: document.getElementById('jumlahBantuan').value,
                status: document.getElementById('status').value,
                keterangan: document.getElementById('keterangan').value,
                driveLink: document.getElementById('driveLink').value,
                tanggalInput: new Date().toISOString()
            };
            
            // Ambil data yang sudah ada dari local storage
            const existingData = JSON.parse(localStorage.getItem('barjasData') || '[]');
            
            // Tambahkan data baru
            existingData.push(data);
            
            // Simpan kembali ke local storage
            localStorage.setItem('barjasData', JSON.stringify(existingData));
            
            // Reset form
            document.getElementById('inputForm').reset();
            
            // Reload tabel data
            loadDataTable();
            
            // Update dashboard stats
            updateDashboardStats();
            
            // Tampilkan pesan sukses
            showToast('Data berhasil disimpan!', 'success');
        }
        
        // Fungsi untuk validasi form
        function validateForm() {
            let isValid = true;
            const fields = [
                'nama', 'nik', 'alamat', 'noHp', 'kecamatan', 'desa', 
                'namaKelompok', 'jabatan', 'jenisBantuan', 'tanggalTerima', 'jumlahBantuan'
            ];
            
            fields.forEach(field => {
                const element = document.getElementById(field);
                const errorElement = document.getElementById(field + 'Error');
                
                if (!element.value.trim()) {
                    element.classList.add('input-error');
                    errorElement.textContent = 'Field ini wajib diisi!';
                    errorElement.style.display = 'block';
                    isValid = false;
                } else {
                    element.classList.remove('input-error');
                    errorElement.style.display = 'none';
                }
            });
            
            // Validasi khusus NIK (harus angka dan 16 digit)
            const nik = document.getElementById('nik');
            const nikError = document.getElementById('nikError');
            
            if (nik.value && !/^\d{16}$/.test(nik.value)) {
                nik.classList.add('input-error');
                nikError.textContent = 'NIK harus 16 digit angka!';
                nikError.style.display = 'block';
                isValid = false;
            }
            
            // Validasi khusus nomor HP (harus angka)
            const noHp = document.getElementById('noHp');
            const noHpError = document.getElementById('noHpError');
            
            if (noHp.value && !/^\d+$/.test(noHp.value)) {
                noHp.classList.add('input-error');
                noHpError.textContent = 'Nomor HP harus berupa angka!';
                noHpError.style.display = 'block';
                isValid = false;
            }
            
            return isValid;
        }
        
        // Fungsi untuk memuat data ke tabel
        function loadDataTable(page = 1) {
            const data = JSON.parse(localStorage.getItem('barjasData') || '[]');
            const tableBody = document.getElementById('dataTable').getElementsByTagName('tbody')[0];
            const filterKecamatan = document.getElementById('filterKecamatan').value;
            const filterDesa = document.getElementById('filterDesa').value;
            const filterStatus = document.getElementById('filterStatus').value;
            const searchText = document.getElementById('searchInput').value.toLowerCase();
            
            // Filter data
            let filteredData = data.filter(item => {
                let match = true;
                
                if (filterKecamatan && item.kecamatan !== filterKecamatan) {
                    match = false;
                }
                
                if (filterDesa && item.desa !== filterDesa) {
                    match = false;
                }
                
                if (filterStatus && item.status !== filterStatus) {
                    match = false;
                }
                
                if (searchText && 
                    !item.nama.toLowerCase().includes(searchText) &&
                    !item.nik.toLowerCase().includes(searchText) &&
                    !item.alamat.toLowerCase().includes(searchText)) {
                    match = false;
                }
                
                return match;
            });
            
            // Urutkan data berdasarkan tanggal input (terbaru pertama)
            filteredData.sort((a, b) => new Date(b.tanggalInput) - new Date(a.tanggalInput));
            
            // Pagination
            const itemsPerPage = 10;
            const totalPages = Math.ceil(filteredData.length / itemsPerPage);
            const startIndex = (page - 1) * itemsPerPage;
            const endIndex = Math.min(startIndex + itemsPerPage, filteredData.length);
            const paginatedData = filteredData.slice(startIndex, endIndex);
            
            // Kosongkan tabel
            tableBody.innerHTML = '';
            
            // Isi tabel dengan data
            paginatedData.forEach((item, index) => {
                const row = tableBody.insertRow();
                const rowNumber = startIndex + index + 1;
                
                // Format tanggal
                const tanggal = new Date(item.tanggalTerima).toLocaleDateString('id-ID', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric'
                });
                
                // Status badge
                let statusClass = '';
                switch(item.status) {
                    case 'Terverifikasi':
                        statusClass = 'bg-success';
                        break;
                    case 'Pending':
                        statusClass = 'bg-warning';
                        break;
                    case 'Ditolak':
                        statusClass = 'bg-danger';
                        break;
                    default:
                        statusClass = 'bg-secondary';
                }
                
                row.innerHTML = `
                    <td>${rowNumber}</td>
                    <td>${item.nama}</td>
                    <td>${item.nik}</td>
                    <td>${item.desa}</td>
                    <td>${item.jenisBantuan}</td>
                    <td>${tanggal}</td>
                    <td><span class="badge ${statusClass}">${item.status}</span></td>
                    <td>
                        <button class="btn btn-sm btn-info btn-view" data-id="${item.id}" data-action="view">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="btn btn-sm btn-primary" data-id="${item.id}" data-action="edit">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-danger" data-id="${item.id}" data-action="delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
            });
            
            // Setup pagination
            setupPagination(page, totalPages, filteredData.length);
            
            // Add event listeners to action buttons
            addActionListeners();
        }
        
        // Fungsi untuk setup pagination
        function setupPagination(currentPage, totalPages, totalItems) {
            const paginationElement = document.getElementById('pagination');
            const tableInfoElement = document.getElementById('tableInfo');
            
            // Update table info
            const itemsPerPage = 10;
            const startItem = (currentPage - 1) * itemsPerPage + 1;
            const endItem = Math.min(currentPage * itemsPerPage, totalItems);
            
            tableInfoElement.textContent = `Menampilkan ${startItem} sampai ${endItem} dari ${totalItems} data`;
            
            // Clear existing pagination
            paginationElement.innerHTML = '';
            
            // Previous button
            const prevLi = document.createElement('li');
            prevLi.classList.add('page-item');
            if (currentPage === 1) prevLi.classList.add('disabled');
            
            prevLi.innerHTML = `
                <a class="page-link" href="#" data-page="${currentPage - 1}">
                    <i class="fas fa-chevron-left"></i>
                </a>
            `;
            
            paginationElement.appendChild(prevLi);
            
            // Page numbers
            const maxVisiblePages = 5;
            let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
            
            if (endPage - startPage + 1 < maxVisiblePages) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }
            
            for (let i = startPage; i <= endPage; i++) {
                const pageLi = document.createElement('li');
                pageLi.classList.add('page-item');
                if (i === currentPage) pageLi.classList.add('active');
                
                pageLi.innerHTML = `<a class="page-link" href="#" data-page="${i}">${i}</a>`;
                paginationElement.appendChild(pageLi);
            }
            
            // Next button
            const nextLi = document.createElement('li');
            nextLi.classList.add('page-item');
            if (currentPage === totalPages) nextLi.classList.add('disabled');
            
            nextLi.innerHTML = `
                <a class="page-link" href="#" data-page="${currentPage + 1}">
                    <i class="fas fa-chevron-right"></i>
                </a>
            `;
            
            paginationElement.appendChild(nextLi);
            
            // Add event listeners to pagination buttons
            paginationElement.querySelectorAll('.page-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const page = parseInt(this.getAttribute('data-page'));
                    if (!isNaN(page) && page >= 1 && page <= totalPages) {
                        loadDataTable(page);
                    }
                });
            });
        }
        
        // Fungsi untuk menambahkan event listener ke tombol aksi
        function addActionListeners() {
            // View button
            document.querySelectorAll('[data-action="view"]').forEach(button => {
                button.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    viewData(id);
                });
            });
            
            // Edit button
            document.querySelectorAll('[data-action="edit"]').forEach(button => {
                button.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    editData(id);
                });
            });
            
            // Delete button
            document.querySelectorAll('[data-action="delete"]').forEach(button => {
                button.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    confirmDelete(id);
                });
            });
        }
        
        // Fungsi untuk melihat detail data
        function viewData(id) {
            const data = JSON.parse(localStorage.getItem('barjasData') || '[]');
            const item = data.find(i => i.id == id);
            
            if (item) {
                // Format tanggal
                const tanggal = new Date(item.tanggalTerima).toLocaleDateString('id-ID', {
                    weekday: 'long',
                    day: '2-digit',
                    month: 'long',
                    year: 'numeric'
                });
                
                // Format jumlah bantuan
                const jumlahBantuan = new Intl.NumberFormat('id-ID', {
                    style: 'currency',
                    currency: 'IDR'
                }).format(item.jumlahBantuan);
                
                // Isi modal dengan data
                document.getElementById('detailNama').textContent = item.nama;
                document.getElementById('detailNik').textContent = item.nik;
                document.getElementById('detailAlamat').textContent = item.alamat;
                document.getElementById('detailNoHp').textContent = item.noHp;
                document.getElementById('detailKecamatan').textContent = item.kecamatan;
                document.getElementById('detailDesa').textContent = item.desa;
                document.getElementById('detailNamaKelompok').textContent = item.namaKelompok;
                document.getElementById('detailJabatan').textContent = item.jabatan;
                document.getElementById('detailJenisBantuan').textContent = item.jenisBantuan;
                document.getElementById('detailTanggalTerima').textContent = tanggal;
                document.getElementById('detailJumlahBantuan').textContent = jumlahBantuan;
                document.getElementById('detailKeterangan').textContent = item.keterangan || '-';
                
                // Status badge
                const statusBadge = document.getElementById('detailStatusBadge');
                statusBadge.textContent = item.status;
                
                switch(item.status) {
                    case 'Terverifikasi':
                        statusBadge.classList.add('bg-success');
                        break;
                    case 'Pending':
                        statusBadge.classList.add('bg-warning');
                        break;
                    case 'Ditolak':
                        statusBadge.classList.add('bg-danger');
                        break;
                    default:
                        statusBadge.classList.add('bg-secondary');
                }
                
                // Link Google Drive
                const driveLink = document.getElementById('detailDriveLink');
                const noLink = document.getElementById('detailNoLink');
                
                if (item.driveLink) {
                    driveLink.href = item.driveLink;
                    driveLink.style.display = 'inline';
                    noLink.style.display = 'none';
                } else {
                    driveLink.style.display = 'none';
                    noLink.style.display = 'inline';
                }
                
                // Set event listener untuk edit button di modal detail
                document.getElementById('detailEditBtn').onclick = function() {
                    $('#detailModal').modal('hide');
                    editData(id);
                };
                
                // Tampilkan modal
                $('#detailModal').modal('show');
            }
        }
        
        // Fungsi untuk mengedit data
        function editData(id) {
            const data = JSON.parse(localStorage.getItem('barjasData') || '[]');
            const item = data.find(i => i.id == id);
            
            if (item) {
                // Isi form edit dengan data
                document.getElementById('editId').value = item.id;
                document.getElementById('editNama').value = item.nama;
                document.getElementById('editNik').value = item.nik;
                document.getElementById('editAlamat').value = item.alamat;
                document.getElementById('editNoHp').value = item.noHp;
                document.getElementById('editKecamatan').value = item.kecamatan;
                document.getElementById('editDesa').value = item.desa;
                document.getElementById('editNamaKelompok').value = item.namaKelompok;
                document.getElementById('editJabatan').value = item.jabatan;
                document.getElementById('editJenisBantuan').value = item.jenisBantuan;
                document.getElementById('editTanggalTerima').value = item.tanggalTerima;
                document.getElementById('editJumlahBantuan').value = item.jumlahBantuan;
                document.getElementById('editStatus').value = item.status;
                document.getElementById('editKeterangan').value = item.keterangan || '';
                document.getElementById('editDriveLink').value = item.driveLink || '';
                
                // Set event listener untuk save button
                document.getElementById('saveEditBtn').onclick = function() {
                    saveEditedData();
                };
                
                // Tampilkan modal
                $('#editModal').modal('show');
            }
        }
        
        // Fungsi untuk menyimpan data yang diedit
        function saveEditedData() {
            const id = document.getElementById('editId').value;
            const data = JSON.parse(localStorage.getItem('barjasData') || '[]');
            const index = data.findIndex(i => i.id == id);
            
            if (index !== -1) {
                // Update data
                data[index] = {
                    ...data[index],
                    nama: document.getElementById('editNama').value,
                    nik: document.getElementById('editNik').value,
                    alamat: document.getElementById('editAlamat').value,
                    noHp: document.getElementById('editNoHp').value,
                    kecamatan: document.getElementById('editKecamatan').value,
                    desa: document.getElementById('editDesa').value,
                    namaKelompok: document.getElementById('editNamaKelompok').value,
                    jabatan: document.getElementById('editJabatan').value,
                    jenisBantuan: document.getElementById('editJenisBantuan').value,
                    tanggalTerima: document.getElementById('editTanggalTerima').value,
                    jumlahBantuan: document.getElementById('editJumlahBantuan').value,
                    status: document.getElementById('editStatus').value,
                    keterangan: document.getElementById('editKeterangan').value,
                    driveLink: document.getElementById('editDriveLink').value
                };
                
                // Simpan kembali ke local storage
                localStorage.setItem('barjasData', JSON.stringify(data));
                
                // Tutup modal
                $('#editModal').modal('hide');
                
                // Reload tabel data
                loadDataTable();
                
                // Update dashboard stats
                updateDashboardStats();
                
                // Tampilkan pesan sukses
                showToast('Data berhasil diperbarui!', 'success');
            }
        }
        
        // Fungsi untuk konfirmasi hapus data
        function confirmDelete(id) {
            // Set event listener untuk confirm button
            document.getElementById('confirmDeleteBtn').onclick = function() {
                deleteData(id);
            };
            
            // Tampilkan modal
            $('#deleteModal').modal('show');
        }
        
        // Fungsi untuk menghapus data
        function deleteData(id) {
            const data = JSON.parse(localStorage.getItem('barjasData') || '[]');
            const filteredData = data.filter(i => i.id != id);
            
            // Simpan kembali ke local storage
            localStorage.setItem('barjasData', JSON.stringify(filteredData));
            
            // Tutup modal
            $('#deleteModal').modal('hide');
            
            // Reload tabel data
            loadDataTable();
            
            // Update dashboard stats
            updateDashboardStats();
            
            // Tampilkan pesan sukses
            showToast('Data berhasil dihapus!', 'success');
        }
        
        // Fungsi untuk update dashboard stats
        function updateDashboardStats() {
            const data = JSON.parse(localStorage.getItem('barjasData') || '[]');
            
            // Total penerima
            document.getElementById('totalPenerima').textContent = data.length;
            
            // Total terverifikasi
            const terverifikasi = data.filter(item => item.status === 'Terverifikasi').length;
            document.getElementById('totalTerverifikasi').textContent = terverifikasi;
            
            // Total pending
            const pending = data.filter(item => item.status === 'Pending').length;
            document.getElementById('totalPending').textContent = pending;
            
            // Total desa
            const desaSet = new Set(data.map(item => item.desa));
            document.getElementById('totalDesa').textContent = desaSet.size;
            
            // Update info di pengaturan
            document.getElementById('infoTotalData').textContent = data.length;
            
            // Calculate data size
            const dataSize = Math.round(JSON.stringify(data).length / 1024);
            document.getElementById('infoDataSize').textContent = `${dataSize} KB`;
            
            // Update browser info
            document.getElementById('infoBrowser').textContent = navigator.userAgent;
            
            // Update recent data table
            updateRecentTable(data);
            
            // Update charts
            updateCharts(data);
        }
        
        // Fungsi untuk update recent table
        function updateRecentTable(data) {
            const recentTable = document.getElementById('recentTable').getElementsByTagName('tbody')[0];
            
            // Kosongkan tabel
            recentTable.innerHTML = '';
            
            // Ambil 5 data terbaru
            const recentData = data
                .sort((a, b) => new Date(b.tanggalInput) - new Date(a.tanggalInput))
                .slice(0, 5);
            
            // Isi tabel dengan data
            recentData.forEach((item, index) => {
                const row = recentTable.insertRow();
                
                // Format tanggal
                const tanggal = new Date(item.tanggalTerima).toLocaleDateString('id-ID', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric'
                });
                
                // Status badge
                let statusClass = '';
                switch(item.status) {
                    case 'Terverifikasi':
                        statusClass = 'bg-success';
                        break;
                    case 'Pending':
                        statusClass = 'bg-warning';
                        break;
                    case 'Ditolak':
                        statusClass = 'bg-danger';
                        break;
                    default:
                        statusClass = 'bg-secondary';
                }
                
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${item.nama}</td>
                    <td>${item.desa}</td>
                    <td>${item.jenisBantuan}</td>
                    <td>${tanggal}</td>
                    <td><span class="badge ${statusClass}">${item.status}</span></td>
                `;
            });
        }
        
        // Fungsi untuk update charts
        function updateCharts(data) {
            // Update stats chart (line chart)
            updateStatsChart(data);
            
            // Update status chart (pie chart)
            updateStatusChart(data);
            
            // Update kecamatan chart (bar chart)
            updateKecamatanChart(data);
            
            // Update jenis bantuan chart (pie chart)
            updateJenisBantuanChart(data);
            
            // Update stats table
            updateStatsTable(data);
        }
        
        // Fungsi untuk update stats chart
        function updateStatsChart(data) {
            const ctx = document.getElementById('statsChart').getContext('2d');
            
            // Group data by month
            const monthlyData = {};
            data.forEach(item => {
                const date = new Date(item.tanggalTerima);
                const monthYear = `${date.getMonth() + 1}/${date.getFullYear()}`;
                
                if (!monthlyData[monthYear]) {
                    monthlyData[monthYear] = 0;
                }
                
                monthlyData[monthYear]++;
            });
            
            // Sort by date
            const sortedMonths = Object.keys(monthlyData).sort((a, b) => {
                const [aMonth, aYear] = a.split('/').map(Number);
                const [bMonth, bYear] = b.split('/').map(Number);
                
                if (aYear !== bYear) return aYear - bYear;
                return aMonth - bMonth;
            });
            
            const labels = sortedMonths.map(month => {
                const [m, y] = month.split('/');
                return `${['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun', 'Jul', 'Ags', 'Sep', 'Okt', 'Nov', 'Des'][m-1]} ${y}`;
            });
            
            const values = sortedMonths.map(month => monthlyData[month]);
            
            // Create or update chart
            if (window.statsChartInstance) {
                window.statsChartInstance.data.labels = labels;
                window.statsChartInstance.data.datasets[0].data = values;
                window.statsChartInstance.update();
            } else {
                window.statsChartInstance = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Jumlah Penerima per Bulan',
                            data: values,
                            borderColor: '#0d47a1',
                            backgroundColor: 'rgba(13, 71, 161, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            tension: 0.3
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'top',
                            },
                            title: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    stepSize: 1
                                }
                            }
                        }
                    }
                });
            }
        }
        
        // Fungsi untuk update status chart
        function updateStatusChart(data) {
            const ctx = document.getElementById('statusChart').getContext('2d');
            
            // Count by status
            const statusCount = {
                'Terverifikasi': data.filter(item => item.status === 'Terverifikasi').length,
                'Pending': data.filter(item => item.status === 'Pending').length,
                'Ditolak': data.filter(item => item.status === 'Ditolak').length
            };
            
            // Create or update chart
            if (window.statusChartInstance) {
                window.statusChartInstance.data.datasets[0].data = Object.values(statusCount);
                window.statusChartInstance.update();
            } else {
                window.statusChartInstance = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: Object.keys(statusCount),
                        datasets: [{
                            data: Object.values(statusCount),
                            backgroundColor: [
                                '#28a745', // Success
                                '#ffc107', // Warning
                                '#dc3545'  // Danger
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom',
                            },
                            title: {
                                display: false
                            }
                        }
                    }
                });
            }
        }
        
        // Fungsi untuk update kecamatan chart
        function updateKecamatanChart(data) {
            const ctx = document.getElementById('kecamatanChart').getContext('2d');
            
            // Group by kecamatan
            const kecamatanCount = {};
            data.forEach(item => {
                if (!kecamatanCount[item.kecamatan]) {
                    kecamatanCount[item.kecamatan] = 0;
                }
                kecamatanCount[item.kecamatan]++;
            });
            
            // Sort by count (descending)
            const sortedKecamatan = Object.entries(kecamatanCount)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10); // Top 10 kecamatan
            
            const labels = sortedKecamatan.map(item => item[0]);
            const values = sortedKecamatan.map(item => item[1]);
            
            // Create or update chart
            if (window.kecamatanChartInstance) {
                window.kecamatanChartInstance.data.labels = labels;
                window.kecamatanChartInstance.data.datasets[0].data = values;
                window.kecamatanChartInstance.update();
            } else {
                window.kecamatanChartInstance = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Jumlah Penerima',
                            data: values,
                            backgroundColor: 'rgba(13, 71, 161, 0.7)',
                            borderColor: 'rgba(13, 71, 161, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                display: false
                            },
                            title: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    stepSize: 1
                                }
                            }
                        }
                    }
                });
            }
        }
        
        // Fungsi untuk update jenis bantuan chart
        function updateJenisBantuanChart(data) {
            const ctx = document.getElementById('jenisBantuanChart').getContext('2d');
            
            // Group by jenis bantuan
            const bantuanCount = {};
            data.forEach(item => {
                if (!bantuanCount[item.jenisBantuan]) {
                    bantuanCount[item.jenisBantuan] = 0;
                }
                bantuanCount[item.jenisBantuan]++;
            });
            
            // Sort by count (descending)
            const sortedBantuan = Object.entries(bantuanCount)
                .sort((a, b) => b[1] - a[1]);
            
            const labels = sortedBantuan.map(item => item[0]);
            const values = sortedBantuan.map(item => item[1]);
            
            // Create or update chart
            if (window.jenisBantuanChartInstance) {
                window.jenisBantuanChartInstance.data.labels = labels;
                window.jenisBantuanChartInstance.data.datasets[0].data = values;
                window.jenisBantuanChartInstance.update();
            } else {
                window.jenisBantuanChartInstance = new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: labels,
                        datasets: [{
                            data: values,
                            backgroundColor: [
                                '#0d47a1', '#1565c0', '#1976d2', '#1e88e5', '#2196f3',
                                '#42a5f5', '#64b5f6', '#90caf9', '#bbdefb', '#e3f2fd'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    boxWidth: 12
                                }
                            },
                            title: {
                                display: false
                            }
                        }
                    }
                });
            }
        }
        
        // Fungsi untuk update stats table
        function updateStatsTable(data) {
            const statsTable = document.getElementById('statsTable').getElementsByTagName('tbody')[0];
            
            // Kosongkan tabel
            statsTable.innerHTML = '';
            
            // Group by desa
            const desaStats = {};
            data.forEach(item => {
                if (!desaStats[item.desa]) {
                    desaStats[item.desa] = {
                        total: 0,
                        terverifikasi: 0,
                        pending: 0,
                        ditolak: 0,
                        totalBantuan: 0
                    };
                }
                
                desaStats[item.desa].total++;
                
                if (item.status === 'Terverifikasi') {
                    desaStats[item.desa].terverifikasi++;
                } else if (item.status === 'Pending') {
                    desaStats[item.desa].pending++;
                } else if (item.status === 'Ditolak') {
                    desaStats[item.desa].ditolak++;
                }
                
                desaStats[item.desa].totalBantuan += parseInt(item.jumlahBantuan) || 0;
            });
            
            // Convert to array and sort by total (descending)
            const sortedDesa = Object.entries(desaStats)
                .sort((a, b) => b[1].total - a[1].total);
            
            // Isi tabel dengan data
            sortedDesa.forEach(([desa, stats], index) => {
                const row = statsTable.insertRow();
                
                // Format total bantuan
                const totalBantuan = new Intl.NumberFormat('id-ID', {
                    style: 'currency',
                    currency: 'IDR',
                    minimumFractionDigits: 0
                }).format(stats.totalBantuan);
                
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${desa}</td>
                    <td>${stats.total}</td>
                    <td>${stats.terverifikasi}</td>
                    <td>${stats.pending}</td>
                    <td>${stats.ditolak}</td>
                    <td>${totalBantuan}</td>
                `;
            });
        }
        
        // Fungsi untuk ekspor data ke Excel
        function exportToExcel() {
            const data = JSON.parse(localStorage.getItem('barjasData') || '[]');
            const filter = document.getElementById('exportFilter').value;
            
            // Filter data
            let filteredData = data;
            if (filter !== 'all') {
                filteredData = data.filter(item => {
                    if (filter === 'verified') return item.status === 'Terverifikasi';
                    if (filter === 'pending') return item.status === 'Pending';
                    if (filter === 'rejected') return item.status === 'Ditolak';
                    return true;
                });
            }
            
            // Prepare data for Excel
            const excelData = filteredData.map(item => ({
                'Nama Lengkap': item.nama,
                'NIK': item.nik,
                'Alamat': item.alamat,
                'No. HP/WhatsApp': item.noHp,
                'Kecamatan': item.kecamatan,
                'Desa/Kelurahan': item.desa,
                'Nama Kelompok': item.namaKelompok,
                'Jabatan': item.jabatan,
                'Jenis Bantuan': item.jenisBantuan,
                'Tanggal Menerima': new Date(item.tanggalTerima).toLocaleDateString('id-ID'),
                'Jumlah Bantuan': item.jumlahBantuan,
                'Status': item.status,
                'Keterangan': item.keterangan || '',
                'Link Dokumen': item.driveLink || ''
            }));
            
            // Create worksheet
            const ws = XLSX.utils.json_to_sheet(excelData);
            
            // Create workbook
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, 'Data Penerima Bantuan');
            
            // Generate Excel file
            const fileName = `Data_BARJAS_${new Date().toISOString().split('T')[0]}.xlsx`;
            XLSX.writeFile(wb, fileName);
            
            // Tampilkan pesan sukses
            showToast('Data berhasil diekspor ke Excel!', 'success');
        }
        
        // Fungsi untuk ekspor data ke PDF
        function exportToPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            const data = JSON.parse(localStorage.getItem('barjasData') || '[]');
            const filter = document.getElementById('pdfFilter').value;
            
            // Filter data
            let filteredData = data;
            if (filter !== 'all') {
                filteredData = data.filter(item => {
                    if (filter === 'verified') return item.status === 'Terverifikasi';
                    if (filter === 'pending') return item.status === 'Pending';
                    if (filter === 'rejected') return item.status === 'Ditolak';
                    return true;
                });
            }
            
            // Prepare data for PDF
            const pdfData = filteredData.map(item => [
                item.nama,
                item.nik,
                item.desa,
                item.jenisBantuan,
                new Date(item.tanggalTerima).toLocaleDateString('id-ID'),
                item.status
            ]);
            
            // Add title
            doc.setFontSize(16);
            doc.text('LAPORAN DATA PENERIMA BANTUAN', 105, 15, { align: 'center' });
            doc.setFontSize(10);
            doc.text(`Tanggal Ekspor: ${new Date().toLocaleDateString('id-ID')}`, 105, 22, { align: 'center' });
            doc.text(`Jumlah Data: ${filteredData.length}`, 105, 27, { align: 'center' });
            
            // Add table
            doc.autoTable({
                head: [['Nama', 'NIK', 'Desa', 'Jenis Bantuan', 'Tanggal', 'Status']],
                body: pdfData,
                startY: 35,
                theme: 'grid',
                headStyles: {
                    fillColor: [13, 71, 161],
                    textColor: 255
                },
                alternateRowStyles: {
                    fillColor: [240, 240, 240]
                }
            });
            
            // Add footer
            const pageCount = doc.internal.getNumberOfPages();
            for (let i = 1; i <= pageCount; i++) {
                doc.setPage(i);
                doc.setFontSize(8);
                doc.text(`Halaman ${i} dari ${pageCount}`, 105, doc.internal.pageSize.height - 10, { align: 'center' });
            }
            
            // Save PDF
            const fileName = `Data_BARJAS_${new Date().toISOString().split('T')[0]}.pdf`;
            doc.save(fileName);
            
            // Tampilkan pesan sukses
            showToast('Data berhasil diekspor ke PDF!', 'success');
        }
        
        // Fungsi untuk mencetak laporan
        function printReport() {
            const data = JSON.parse(localStorage.getItem('barjasData') || '[]');
            const kecamatan = document.getElementById('printKecamatan').value;
            const desa = document.getElementById('printDesa').value;
            const status = document.getElementById('printStatus').value;
            
            // Filter data
            let filteredData = data.filter(item => {
                let match = true;
                
                if (kecamatan && item.kecamatan !== kecamatan) {
                    match = false;
                }
                
                if (desa && item.desa !== desa) {
                    match = false;
                }
                
                if (status && item.status !== status) {
                    match = false;
                }
                
                return match;
            });
            
            // Create print window
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Laporan Data Penerima Bantuan</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; }
                        .print-header { text-align: center; margin-bottom: 20px; }
                        .print-title { font-size: 18px; font-weight: bold; margin-bottom: 5px; }
                        .print-subtitle { font-size: 14px; margin-bottom: 10px; }
                        .print-date { font-size: 12px; text-align: right; margin-bottom: 10px; }
                        table { width: 100%; border-collapse: collapse; font-size: 12px; }
                        th, td { border: 1px solid #ddd; padding: 6px; text-align: left; }
                        th { background-color: #f2f2f2; }
                        tr:nth-child(even) { background-color: #f9f9f9; }
                        @media print {
                            @page { size: landscape; margin: 0.5cm; }
                            body { margin: 0; }
                        }
                    </style>
                </head>
                <body>
                    <div class="print-header">
                        <div class="print-title">LAPORAN DATA PENERIMA BANTUAN</div>
                        <div class="print-subtitle">BARJAS - Sistem Bantuan Terpadu</div>
                        <div class="print-subtitle">Kabupaten Situbondo</div>
                    </div>
                    <div class="print-date">Dicetak pada: ${new Date().toLocaleDateString('id-ID')} ${new Date().toLocaleTimeString('id-ID')}</div>
                    <table>
                        <thead>
                            <tr>
                                <th>No</th>
                                <th>Nama</th>
                                <th>NIK</th>
                                <th>Alamat</th>
                                <th>Kecamatan</th>
                                <th>Desa</th>
                                <th>Nama Kelompok</th>
                                <th>Jabatan</th>
                                <th>Jenis Bantuan</th>
                                <th>Tanggal</th>
                                <th>Jumlah</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
            `);
            
            // Add data rows
            filteredData.forEach((item, index) => {
                printWindow.document.write(`
                    <tr>
                        <td>${index + 1}</td>
                        <td>${item.nama}</td>
                        <td>${item.nik}</td>
                        <td>${item.alamat}</td>
                        <td>${item.kecamatan}</td>
                        <td>${item.desa}</td>
                        <td>${item.namaKelompok}</td>
                        <td>${item.jabatan}</td>
                        <td>${item.jenisBantuan}</td>
                        <td>${new Date(item.tanggalTerima).toLocaleDateString('id-ID')}</td>
                        <td>${new Intl.NumberFormat('id-ID').format(item.jumlahBantuan)}</td>
                        <td>${item.status}</td>
                    </tr>
                `);
            });
            
            printWindow.document.write(`
                        </tbody>
                    </table>
                    <div style="margin-top: 20px; font-size: 12px;">
                        Total Data: ${filteredData.length}
                    </div>
                </body>
                </html>
            `);
            
            printWindow.document.close();
            
            // Wait for content to load then print
            setTimeout(() => {
                printWindow.print();
                // printWindow.close();
            }, 250);
        }
        
        // Fungsi untuk mencadangkan data
        function backupData() {
            const data = localStorage.getItem('barjasData');
            const securityCode = localStorage.getItem('securityCode');
            
            const backupData = {
                barjasData: JSON.parse(data),
                securityCode: securityCode,
                backupDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(backupData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `backup_barjas_${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            // Tampilkan pesan sukses
            showToast('Data berhasil dicadangkan!', 'success');
        }
        
        // Fungsi untuk memulihkan data
        function restoreData() {
            const fileInput = document.getElementById('restoreFileInput');
            const file = fileInput.files[0];
            
            if (!file) {
                showToast('Pilih file backup terlebih dahulu!', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const backupData = JSON.parse(e.target.result);
                    
                    // Validasi format file backup
                    if (!backupData.barjasData || !backupData.securityCode) {
                        showToast('Format file backup tidak valid!', 'error');
                        return;
                    }
                    
                    // Konfirmasi sebelum restore
                    if (confirm('Restore data akan mengganti semua data yang ada. Lanjutkan?')) {
                        // Simpan data ke local storage
                        localStorage.setItem('barjasData', JSON.stringify(backupData.barjasData));
                        localStorage.setItem('securityCode', backupData.securityCode);
                        
                        // Reset file input
                        fileInput.value = '';
                        document.getElementById('restoreDataBtn').disabled = true;
                        
                        // Reload data
                        loadDataTable();
                        updateDashboardStats();
                        
                        // Tampilkan pesan sukses
                        showToast('Data berhasil dipulihkan!', 'success');
                    }
                } catch (error) {
                    console.error('Error parsing backup file:', error);
                    showToast('File backup tidak valid!', 'error');
                }
            };
            reader.readAsText(file);
        }
        
        // Fungsi untuk menghapus semua data
        function clearAllData() {
            // Hapus data dari local storage
            localStorage.removeItem('barjasData');
            
            // Inisialisasi ulang dengan array kosong
            localStorage.setItem('barjasData', JSON.stringify([]));
            
            // Tutup modal
            $('#clearAllModal').modal('hide');
            
            // Reset form konfirmasi
            document.getElementById('clearConfirmText').value = '';
            document.getElementById('confirmClearAllBtn').disabled = true;
            
            // Reload data
            loadDataTable();
            updateDashboardStats();
            
            // Tampilkan pesan sukses
            showToast('Semua data berhasil dihapus!', 'success');
        }
        
        // Fungsi untuk generate kode keamanan acak
        function generateSecurityCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let code = '';
            
            for (let i = 0; i < 8; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            
            document.getElementById('newSecurityCode').value = code;
        }
        
        // Fungsi untuk mengubah kode keamanan
        function changeSecurityCode() {
            const newCode = document.getElementById('newSecurityCode').value;
            
            if (!newCode) {
                showToast('Masukkan kode keamanan baru!', 'error');
                return;
            }
            
            // Simpan kode baru
            localStorage.setItem('securityCode', newCode);
            
            // Reset form
            document.getElementById('newSecurityCode').value = '';
            
            // Tampilkan pesan sukses
            showToast('Kode keamanan berhasil diubah!', 'success');
        }
        
        // Fungsi untuk reset percobaan login
        function resetLoginAttempts() {
            localStorage.setItem('loginAttempts', 0);
            localStorage.setItem('lastAttemptTime', 0);
            
            // Tampilkan pesan sukses
            showToast('Percobaan login berhasil direset!', 'success');
        }
        
        // Fungsi untuk logout
        function logout() {
            if (confirm('Apakah Anda yakin ingin keluar dari aplikasi?')) {
                // Sembunyikan konten aplikasi
                document.getElementById('appContent').classList.add('app-content-unauthenticated');
                
                // Tampilkan modal login
                $('#loginModal').modal('show');
                
                // Reset form login
                document.getElementById('loginForm').reset();
                document.getElementById('attemptsCount').textContent = '';
                document.getElementById('blockedMessage').classList.add('d-none');
                
                // Tampilkan pesan
                showToast('Anda telah logout dari aplikasi.', 'info');
            }
        }
        
        // Fungsi untuk menampilkan toast notification
        function showToast(message, type = 'info') {
            const toast = document.querySelector('.toast');
            const toastBody = document.querySelector('.toast-body');
            
            // Set message and type
            toastBody.textContent = message;
            
            // Set background color based on type
            switch(type) {
                case 'success':
                    toast.querySelector('.toast-header').style.backgroundColor = '#d4edda';
                    toast.querySelector('.toast-header').style.color = '#155724';
                    toast.querySelector('.toast-header i').className = 'fas fa-check-circle me-2 text-success';
                    break;
                case 'error':
                    toast.querySelector('.toast-header').style.backgroundColor = '#f8d7da';
                    toast.querySelector('.toast-header').style.color = '#721c24';
                    toast.querySelector('.toast-header i').className = 'fas fa-exclamation-circle me-2 text-danger';
                    break;
                case 'warning':
                    toast.querySelector('.toast-header').style.backgroundColor = '#fff3cd';
                    toast.querySelector('.toast-header').style.color = '#856404';
                    toast.querySelector('.toast-header i').className = 'fas fa-exclamation-triangle me-2 text-warning';
                    break;
                default:
                    toast.querySelector('.toast-header').style.backgroundColor = '#cce5ff';
                    toast.querySelector('.toast-header').style.color = '#004085';
                    toast.querySelector('.toast-header i').className = 'fas fa-info-circle me-2 text-primary';
            }
            
            // Show toast
            const bsToast = new bootstrap.Toast(toast);
            bsToast.show();
        }
    </script>
</body>
</html>
